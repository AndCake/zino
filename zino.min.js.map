{"version":3,"sources":["src/utils.js","src/events.js","src/vdom.js","src/core.js","src/mustacheparser.js","src/zino.js"],"names":["merge","target","args","Array","_len","_key","arguments","forEach","arg","all","HTMLElement","propDetails","value","writable","obj","attribute","isObj","Object","getOwnPropertyDescriptor","uuid","replace","c","r","Math","random","toString","publishEvent","type","data","name","indexOf","trigger","eventQueue","index","fn","result","on","push","off","isFn","one","self","apply","this","attachEvent","el","events","host","addEventListener","findEl","selector","node","slice","call","querySelectorAll","length","parentNode","eventObj","keys","handlers","event","e","getHost","isArray","prototype","setDataResolver","resolver","Tag","tagName","attributes","children","toLowerCase","attr","_typeof","tag","reduce","a","b","__complexity","tagFilter","tagsCreated","getElementsByTagName","dom","concat","filter","child","setFilter","clearTagsCreated","getTagsCreated","getInnerHTML","map","babelHelpers.typeof","dataResolver","join","createElement","document","createTextNode","setAttribute","__vdom","functions","innerHTML","applyText","domChild","match","childNodes","html","replaceChild","applyDOM","vdom","getAttribute","id","removeAttribute","appendChild","nodeType","nodeValue","removeChild","registerTag","Zino","firstElement","tagRegistry","defaultFunctions","initializeTag","mount","ignoreRender","entry","render","emptyFunc","noEvents","renderTag","registryEntry","sibling","className","__i","isRendered","ownerDocument","subEvents","hostEvents","childEvents","isNotSelf","__ready","defineAttribute","__s","initializeNode","_ref","undefined","_ref$node","bind","desc","get","defineProperty","val","props","getAttributes","attrs","mounting","Error","message","renderCallbacks","renderedSubElements","renderedDOM","renderOptions","resolveData","class","__subs","unmountTag","subEl","subElEvents","subElements","abs","noRenderCallback","callback","attachSubEvents","count","__eventsAttached","onready","dataRegistry","unmount","propsOnly","element","styles","body","isComplex","substr","g","m1","m2","toUpperCase","setElementAttr","source","baseAttrs","handleStyles","style","global","trim","selectors","split","RegExp","parse","getData","level","handleText","text","isAttr","lastIndex","cat","syntax","exec","frag","substring","key","resultObject","safeAccess","usesMerge","usesRenderStyle","usesSpread","tagStack","content","m","commentRegExp","x","$1","$2","tagRegExp","expected","pop","attrRegExp","helperFunctions","toArray","spread","renderStyle","JSON","stringify","baseCode","$","context","oldID","attrName","urlRegistry","window","zinoTagRegistry","dirtyTags","tagObserver","MutationObserver","records","record","added","addedNodes","removed","removedNodes","subTag","zino","url","cache","code","req","XMLHttpRequest","open","onreadystatechange","readyState","callbacks","status","responseText","cb","send","path","register","fetch","Function","quote","getElementById","head","import","href","observe","requestAnimationFrame","reRender","shift"],"mappings":"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","file":"zino.min.js","sourcesContent":["/**\n * Merges all objects provided as parameters into the first parameter object\n *\n * @param  {...Object} args list of arguments\n * @return {Object}         the merged object (same as first argument)\n */\nexport function merge (target, ...args) {\n\targs.forEach(arg => {\n\t\tfor (let all in arg) {\n\t\t\tif ((typeof HTMLElement !== 'undefined' && arg instanceof HTMLElement) || typeof propDetails(arg, all).value !== 'undefined' && (!target[all] || propDetails(target, all).writable)) {\n\t\t\t\tif (all !== 'attributes') target[all] = arg[all];\n\t\t\t}\n\t\t}\n\t});\n\n\treturn target;\n}\n\nfunction propDetails(obj, attribute) {\n\treturn isObj(obj) && Object.getOwnPropertyDescriptor(obj, attribute) || {};\n}\n\n/**\n * Creates a diff of two JS objects. Includes attribute position check.\n *\n * @param  {Object} objA\tthe object to be compared\n * @param  {Object} objB \tthe object to compare with\n * @return {Object,Boolean} false if both objects are deep equal, else the values of what is different\n */\nexport function objectDiff(objA, objB) {\n\tlet result = {},\n\t\tpartialDiff;\n\n\tif (!objA) return objB || false;\n\tif (!objB) return objA || false;\n\tObject.keys(objA).forEach((key, index) => {\n\t\tif (['__vdom', 'element', 'parentNode', 'innerHTML', 'outerHTML', 'className'].indexOf(key) >= 0 || isFn(objA[key])) return;\n\t\tif (typeof objB[key] === 'undefined') {\n\t\t\tresult[key] = objA[key];\n\t\t} else if (Object.keys(objB)[index] !== key) {\n\t\t\tlet bKey = Object.keys(objB)[index];\n\t\t\tresult[bKey] = objB[bKey];\n\t\t\tresult[key] = objA[key];\n\t\t} else if (typeof objA[key] !== 'object' || typeof objB[key] !== 'object') {\n\t\t\tif (objA[key] !== objB[key]) {\n\t\t\t\tresult[key] = objB[key];\n\t\t\t}\n\t\t} else if (partialDiff = objectDiff(objA[key], objB[key])) {\n\t\t\tresult[key] = partialDiff;\n\t\t}\n\t});\n\tObject.keys(objB).forEach((key, index) => {\n\t\tif (['__vdom', 'element', 'parentNode', 'innerHTML', 'outerHTML', 'className'].indexOf(key) >= 0 || isFn(objB[key])) return;\n\t\tif (typeof objA[key] === 'undefined') {\n\t\t\tresult[key] = objB[key];\n\t\t}\n\t});\n\tif (Object.keys(result).length > 0) return result;\n\treturn false;\n}\n\nexport function error(method, tag, parentException) {\n\tif (!parentException) {\n\t\tparentException = tag;\n\t}\n\tparentException.message = 'Error while calling ' + method + (parentException !== tag ? ' function of ' + tag : '') + ': ' + (parentException.message || parentException);\n\tthrow parentException;\n}\n\n/**\n * Checks if the given arguments are the provided types, if they do no match, an exception is thrown.\n *\n * @param  {Array} args \tlist of arguments provided to callee\n * @param  {Array} types \tlist of data types expected for the provided arguments\n * @param  {String} api  \tname of the API (callee name)\n */\nexport function checkParams(args, types, api) {\n\tfor (var all in args) {\n\t\tif (types[all] && typeof args[all] !== types[all]) {\n\t\t\tthrow new Error('API mismatch while using ' + api + ': Parameter ' + all + ' was supposed to be ' + types[all] + ' but ' + (typeof args[all]) + ' was given.');\n\t\t}\n\t}\n}\n\n/**\n * makes sure that accessing attributes on an unknown data value is safe\n *\n * @param  {Mixed} obj \tdata to made safe for attribute access\n * @return {Object}     will always return an object\n */\nexport function safeAccess(obj) {\n\treturn obj || {};\n}\n\nexport function uuid() {\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n\t\tlet r = Math.random() * 16 | 0;\n\t\treturn (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n\t});\n}\nexport var isObj = obj => typeof obj === 'object';\nexport var isFn = fn => typeof fn === 'function';\nexport var emptyFunc = () => {};\nexport var identity = a => a;\n\nexport function isValue(obj, key) {\n\tlet descriptor = Object.getOwnPropertyDescriptor(obj, key);\n\treturn typeof descriptor.value !== 'undefined' && !isFn(descriptor.value);\n}\n","import {isFn} from './utils';\n\nlet eventQueue = {};\n\nfunction publishEvent(type, data) {\n\tdata.name.indexOf('--event-') && trigger('--event-' + type, data);\n}\n\nexport function trigger(name, data) {\n\tif (!eventQueue[name]) return;\n\tfor (let index in eventQueue[name]) {\n\t\tpublishEvent('trigger', {name, fn: eventQueue[name][index], data});\n\t\tlet result = eventQueue[name][index](data);\n\t\tif (result === false) break;\n\t}\n}\n\nexport function on(name, fn) {\n\tif (!eventQueue[name]) {\n\t\teventQueue[name] = [];\n\t}\n\teventQueue[name].push(fn);\n\tpublishEvent('register', {name, fn});\n}\n\nexport function off(name, fn) {\n\tif (!isFn(fn)) {\n\t\tdelete eventQueue[name];\n\t\treturn publishEvent('unregister', {name});\n\t}\n\tfor (let index in eventQueue[name]) {\n\t\tif (eventQueue[name][index] === fn) {\n\t\t\tdelete eventQueue[name][index];\n\t\t\treturn publishEvent('unregister', {name, fn});\n\t\t}\n\t}\n}\n\nexport function one(name, fn) {\n\ton(name, function self() {\n\t\tfn.apply(this, arguments);\n\t\toff(name, self);\n\t});\n}\n\nexport function attachEvent (el, events, host) {\n\tif (!isFn(el.addEventListener)) return;\n\tlet findEl = (selector, target) => {\n\t\tlet node = [].slice.call(el.querySelectorAll(selector));\n\t\twhile (node.length > 0 && target !== host) {\n\t\t\tif (node.indexOf(target) >= 0) return node[node.indexOf(target)];\n\t\t\ttarget = target.parentNode;\n\t\t}\n\t\treturn false;\n\t};\n\tevents.forEach(eventObj => {\n\t\tObject.keys(eventObj.handlers).forEach(event => {\n\t\t\tel.addEventListener(event, e => {\n\t\t\t\tlet target;\n\t\t\t\tif (eventObj.selector === ':host' || (target = findEl(eventObj.selector, e.target))) {\n\t\t\t\t\ttarget && (target.getHost = () => host.getHost());\n\t\t\t\t\teventObj.handlers[event].call(target || host, e);\n\t\t\t\t}\n\t\t\t}, false);\n\t\t});\n\t});\n}\n","import {uuid} from './utils';\nimport {trigger} from './events';\n\nlet tagFilter = [];\nlet tagsCreated = [];\nlet dataResolver = (attr, value) => {\n\treturn attr;\n};\n\nfunction isArray(obj) {\n\treturn Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nexport function setDataResolver(resolver) {\n\tdataResolver = resolver;\n}\n\nexport function Tag(tagName, attributes, children) {\n\ttagName = tagName.toLowerCase();\n\tattributes = attributes || {};\n\tObject.keys(attributes).forEach(attr => {\n\t\tattributes[attr] = {name: attr, value: attributes[attr]};\n\t});\n\tchildren = children && (typeof children !== 'object' || children.tagName) ? [children] : children || [];\n\tlet tag = {\n\t\ttagName,\n\t\tattributes,\n\t\tchildren: children,\n\t\t__complexity: children.reduce(((a, b) => a + (b.__complexity || 1)), 0) + children.length\n\t};\n\tif (tagFilter.indexOf(tagName) >= 0) tagsCreated.push(tag);\n\treturn tag;\n}\n\n/**\n * Returns all tags with a given tag name. If the provided context contains a getElementsByTagName() function,\n * that will be used to retrieve the data, else a manual recursive lookup will be done\n *\n * @param  {String} name - name of the tag to retrieve the elements  of\n * @param  {Object} dom - either a VDOM node or a DOM node\n * @return {Array} - list of elements that match the provided tag name\n */\nexport function getElementsByTagName(name, dom) {\n\tlet result = [];\n\tname = (name || '').toLowerCase();\n\tif (typeof dom.getElementsByTagName === 'function') return [].slice.call(dom.getElementsByTagName(name));\n\n\tif (dom.children) {\n\t\tresult = result.concat(dom.children.filter(child => child.tagName && child.tagName.toLowerCase() === name));\n\t\tdom.children.forEach(child => {\n\t\t\tresult = result.concat(getElementsByTagName(name, child));\n\t\t});\n\t}\n\treturn result;\n}\n\n/**\n * defines which VDOM nodes should be captured for getTagsCreated()\n * @param {Array} filter - an array of strings representing the tag names of the tags to be captured\n */\nexport function setFilter(filter) {\n\ttagFilter = filter;\n}\n\n/**\n * retrieves the list of tags that have been created since the last call of getTagsCreated()\n * @return {Array} - an array of VDOM nodes that were created\n */\nexport function clearTagsCreated() {\n\ttagsCreated = [];\n}\n\n/**\n * retrieves the list of tags that have been created since the last call of getTagsCreated()\n * @return {Array} - an array of VDOM nodes that were created\n */\nexport function getTagsCreated() {\n\tlet created = tagsCreated;\n\treturn created;\n}\n\n/**\n * Calculates the HTML structure as a String represented by the VDOM\n *\n * @param  {Object} node - the VDOM node whose inner HTML to generate\n * @return {String} - the HTML structure representing the VDOM\n */\nexport function getInnerHTML(node) {\n\tif (!node.children) return '';\n\tif (!isArray(node.children)) node.children = [node.children];\n\n\treturn (isArray(node) && node || node.children).map(child => {\n\t\tif (typeof child !== 'object') {\n\t\t\treturn '' + child;\n\t\t} else if (isArray(child)) {\n\t\t\treturn getInnerHTML(child);\n\t\t} else {\n\t\t\tlet attributes = [''].concat(Object.keys(child.attributes).map(attr => {\n\t\t\t\tif (typeof child.attributes[attr].value === 'object') {\n\t\t\t\t\treturn attr + '=\"--' + dataResolver(attr, child.attributes[attr].value) + '--\"';\n\t\t\t\t} else {\n\t\t\t\t\treturn attr+'=\"' + child.attributes[attr].value + '\"';\n\t\t\t\t}\n\t\t\t}));\n\t\t\treturn `<${child.tagName}${attributes.join(' ')}>${getInnerHTML(child)}</${child.tagName}>`;\n\t\t}\n\t}).join('');\n}\n\n/**\n * Creates a new DOM node\n *\n * @param  {Object|String} node - a VDOM node\n * @param  {Document} document - the document in which to create the DOM node\n * @return {Node} - the DOM node created (either a text element or an HTML element)\n */\nfunction createElement(node, document) {\n\tlet tag;\n\tif (typeof node !== 'object') {\n\t\t// we have a text node, so create one\n\t\ttag = document.createTextNode('' + node);\n\t} else {\n\t\ttag = document.createElement(node.tagName);\n\t\t// add all required attributes\n\t\tObject.keys(node.attributes).forEach((attr) => {\n\t\t\ttag.setAttribute(attr, node.attributes[attr].value);\n\t\t});\n\t\tif (node.__vdom) {\n\t\t\t// it's a component, so don't forget to initialize this new instance\n\t\t\ttrigger('--zino-initialize-node', {tag, node: node.functions});\n\t\t}\n\t\t// define it's inner structure\n\t\ttag.innerHTML = getInnerHTML(node);\n\t}\n\n\treturn tag;\n}\n\nfunction applyText(domChild, dom, node, document) {\n\t// simply apply the value\n\tif (node.match(/<[\\w:_-]+[^>]*>/)) {\n\t\tif (dom.childNodes.length === 1) {\n\t\t\tdom.innerHTML = node;\n\t\t} else {\n\t\t\tlet html = document.createElement('span');\n\t\t\thtml.innerHTML = node;\n\t\t\tdom.replaceChild(html, domChild);\n\t\t}\n\t} else {\n\t\t// it's just a text node, so simply replace the element with the text node\n\t\tdom.replaceChild(createElement(node.replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&'), document), domChild);\n\t}\t\n}\n\n/**\n * Applies a VDOM to an actual DOM, meaning that the state of the VDOM will be recreated on the DOM.\n * The end result is, that the DOM structure is the same as the VDOM structure. Existing elements will\n * be repurposed, new elements created where necessary.\n *\n * @param  {DOM} dom - the DOM to which the VDOM should be applied\n * @param  {Object} vdom - the VDOM to apply to the DOM\n * @param  {Document} document - the document that the DOM is based on, used for createElement() and createTextNode() calls\n */\nexport function applyDOM(dom, vdom, document) {\n\tif (!isArray(vdom)) {\n\t\t// if we have a node\n\t\tif (!isArray(vdom.children)) vdom.children = [vdom.children];\n\t\t// if the tag name is not the same\n\t\tif (vdom.tagName !== dom.tagName.toLowerCase()) {\n\t\t\t// replace the node entirely\n\t\t\tdom.parentNode.replaceChild(createElement(vdom, document), dom);\n\t\t} else {\n\t\t\t// check all vdom attributes\n\t\t\tObject.keys(vdom.attributes).forEach(attr => {\n\t\t\t\t// if the VDOM attribute is a non-object\n\t\t\t\tif (typeof vdom.attributes[attr].value !== 'object') {\n\t\t\t\t\t// check if it differs\n\t\t\t\t\tif (dom.getAttribute(attr) != vdom.attributes[attr].value) {\n\t\t\t\t\t\t// if so, apply it\n\t\t\t\t\t\tdom.setAttribute(attr, vdom.attributes[attr].value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// the attribute is an object\n\t\t\t\t\tif (dom.getAttribute(attr) && dom.getAttribute(attr).match(/^--|--$/g)) {\n\t\t\t\t\t\t// if it has a complex value, use the data resolver to define it on the DOM\n\t\t\t\t\t\tlet id = dataResolver(attr, vdom.attributes[attr].value, dom.getAttribute(attr).replace(/^--|--$/g, ''));\n\t\t\t\t\t\t// only set the ID with markers so that we know it is supposed to be a complex value\n\t\t\t\t\t\tdom.setAttribute(attr, `--${id}--`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t// if we have too many attributes in our DOM\n\t\t\tif (dom.attributes.length > Object.keys(vdom.attributes)) {\n\t\t\t\t[].forEach.call(dom.attributes, attr => {\n\t\t\t\t\t// if the respective attribute does not exist on the VDOM\n\t\t\t\t\tif (typeof vdom.attributes[attr.name] === 'undefined') {\n\t\t\t\t\t\t// remove it\n\t\t\t\t\t\tdom.removeAttribute(attr.name);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t// deal with the vdom's children\n\tlet children = (isArray(vdom) ? vdom : vdom.children);\n\tchildren.forEach((node, index) => {\n\t\tif (isArray(node)) return applyDOM(dom, node, document);\n\t\tlet domChild = dom.childNodes[index];\n\t\tif (typeof domChild === 'undefined') {\n\t\t\t// does not exist, so it needs to be appended\n\t\t\tdom.appendChild(createElement(node, document));\n\t\t} else if (domChild.nodeType === 3) {\n\t\t\t// is a text node\n\t\t\t// if the VDOM node is also a text node\n\t\t\tif (typeof node === 'string' && domChild.nodeValue !== node) {\n\t\t\t\tapplyText(domChild, dom, node, document);\n\t\t\t} else if (typeof node !== 'string') {\n\t\t\t\t// else replace with a new element\n\t\t\t\tdom.replaceChild(createElement(node, document), domChild);\n\t\t\t}\n\t\t} else if (domChild.nodeType === 1) {\n\t\t\t// is a normal HTML tag\n\t\t\tif (typeof node === 'object') {\n\t\t\t\t// the VDOM is also a tag, apply it recursively\n\t\t\t\tapplyDOM(domChild, node, document);\n\t\t\t} else {\n\t\t\t\tapplyText(domChild, dom, node, document);\n\t\t\t}\n\t\t}\n\t});\n\tif (dom.childNodes.length > children.length) {\n\t\t// remove superfluous child nodes\n\t\t[].slice.call(dom.childNodes, children.length).forEach(child => dom.removeChild(child));\n\t}\n}\n","import * as vdom from './vdom';\nimport {emptyFunc, isFn, isObj, uuid, merge} from './utils';\nimport {trigger, on, attachEvent} from './events';\n\nexport let renderOptions = {\n\tresolveData(key, value, oldID) {\n\t\tlet id = uuid();\n\t\tif (oldID) {\n\t\t\t// unregister old entry\n\t\t\tdelete dataRegistry[oldID];\n\t\t}\n\t\tdataRegistry[id] = value;\n\t\treturn id;\n\t}\n};\n\nlet tagRegistry = {},\n\tdataRegistry = {},\n\tdefaultFunctions = {\n\t\t'props': {},\n\t\t'mount': emptyFunc,\n\t\t'unmount': emptyFunc,\n\t\t'render': emptyFunc,\n\n\t\tgetHost() { return this; },\n\t\tsetProps(name, value) {\n\t\t\tlet tag = this.getHost();\n\t\t\tif (isObj(name)) {\n\t\t\t\tmerge(tag.props, name);\n\t\t\t} else {\n\t\t\t\ttag.props[name] = value;\n\t\t\t\tlet attrName = 'data-' + name.replace(/[A-Z]/g, g => `-${g.toLowerCase()}`);\n\t\t\t\tif (tag.attributes[attrName]) {\n\t\t\t\t\tdefineAttribute(tag, attrName, `--${renderOptions.resolveData(name, value, tag.attributes[attrName].value)}--`);\n\t\t\t\t}\n\t\t\t}\n\t\t\t!tag.mounting && trigger('--zino-rerender-tag', tag);\n\t\t}\n\t};\n\nexport function registerTag(fn, document, Zino) {\n\tlet firstElement = fn(vdom.Tag, Zino),\n\t\ttagName = firstElement.tagName;\n\n\tif (tagRegistry[tagName]) {\n\t\t// tag is already registered\n\t\treturn;\n\t}\n\n\thandleStyles(firstElement);\n\tfirstElement.functions = merge({}, defaultFunctions, firstElement.functions);\n\ttagRegistry[tagName] = firstElement;\n\n\t// initialize all occurences in provided context\n\tdocument && [].slice.call(vdom.getElementsByTagName(tagName, document)).forEach(tag => initializeTag(tag, tagRegistry[tagName]));\n}\n\nexport function mount(tag, ignoreRender) {\n\tif (!tag.tagName) return;\n\tlet entry = tagRegistry[tag.tagName.toLowerCase()];\n\tif (!entry || tag.getAttribute('__ready')) return;\n\tif (ignoreRender) entry.functions.render = emptyFunc;\n\treturn initializeTag.call(ignoreRender ? {noEvents: true} : this, tag, entry);\n}\n\nexport function render(tag) {\n\tlet subEvents = renderTag(tag);\n\tattachSubEvents(subEvents, tag);\n}\n\nexport function flushRegisteredTags() {\n\ttagRegistry = {};\n}\n\nfunction initializeTag(tag, registryEntry) {\n\t// check if the tag has been initialized already\n\tif (tag.__vdom || !registryEntry) return;\n\tlet functions = registryEntry.functions;\n\n\t// if it has been pre-rendered\n\tif (tag.children.length > 0 && tag.children[0].attributes && tag.children[0].attributes['class'] && tag.children[0].attributes['class'].value === '-shadow-root') {\n\t\tlet sibling = tag.children[1];\n\t\t// remove original HTML content\n\t\tif (sibling && sibling.className === '-original-root') {\n\t\t\ttag.__i = sibling.innerHTML;\n\t\t\tsetElementAttr(sibling, tag);\n\t\t\tsibling.parentNode.removeChild(sibling);\n\t\t}\n\t\ttag.isRendered = true;\n\t} else {\n\t\ttag.__i = tag.ownerDocument ? tag.innerHTML : vdom.getInnerHTML(tag);\n\t\tsetElementAttr(tag);\n\t\ttag.innerHTML = '<div class=\"-shadow-root\"></div>';\n\t\ttag.isRendered = false;\n\t}\n\ttrigger('--zino-initialize-node', {tag, node: functions});\n\ttag.__vdom = {};\n\n\t// render the tag's content\n\tlet subEvents = !tag.isRendered && renderTag.call(this, tag) || {events:[]};\n\t\n\t// attach events\n\tlet hostEvents = [],\n\t\tevents = functions.events || [],\n\t\tchildEvents = Object.keys(events).filter(all => {\n\t\t\tlet isNotSelf = all !== ':host' && all !== tag.tagName;\n\t\t\tif (!isNotSelf) hostEvents.push({handlers: events[all], selector: all});\n\t\t\treturn isNotSelf;\n\t\t}).map(e => ({selector: e, handlers: events[e]}));\n\n\tsubEvents.events = subEvents.events.concat({childEvents, hostEvents, tag: this && this.noEvents ? tag.tagName : tag})\n\n\tif (!tag.attributes.__ready) {\n\t\tdefineAttribute(tag, '__ready', true);\n\t}\n\tif (!this || this.noEvents !== true) {\n\t\t// attach sub events\n\t\tattachSubEvents(subEvents, tag);\n\t} else {\n\t\treturn subEvents;\n\t}\n}\n\nfunction defineAttribute(tag, name, value) { \n\t// if __s is already defined (which means the component has been mounted already) \n\tif (isFn(tag.__s)) { \n\t\t// if it's the same as setAttribute \n\t\tif (tag.__s === tag.setAttribute) { \n\t\t\t// we might have a double override => use the original HTMLElement's setAttribute instead to avoid endless recursion \n\t\t\tHTMLElement.prototype.setAttribute.call(tag, name, value); \n\t\t} else { \n\t\t\t// we now know it's the original setAttribute (also works for vdom nodes) \n\t\t\ttag.__s(name, value); \n\t\t} \n\t} else { \n\t\t// if the element is not a mounted component \n\t\t// but it is a regular HTML element \n\t\tif (tag.ownerDocument) { \n\t\t\t// use the HTMLElement's setAttribute to define the attribute \n\t\t\tHTMLElement.prototype.setAttribute.call(tag, name, value); \n\t\t} else { \n\t\t\t// we now know it can only be a vdom node, so set attribute vdom-style \n\t\t\ttag.attributes[name] = {name, value}; \n\t\t} \n\t} \n} \n\nfunction initializeNode({tag, node: functions = defaultFunctions}) {\n\t// copy all defined functions/attributes\n\tfor (let all in functions) {\n\t\tlet entry = functions[all];\n\t\tif (['mount', 'unmount', 'events', 'render'].indexOf(all) < 0) {\n\t\t\tif (isFn(entry)) {\n\t\t\t\ttag[all] = entry.bind(tag);\n\t\t\t} else {\n\t\t\t\ttag[all] = isObj(tag[all]) ? merge({}, entry, tag[all]) : entry;\n\t\t\t}\n\t\t}\n\t}\n\t// define basic properties\n\tlet desc = Object.getOwnPropertyDescriptor(tag, 'body');\n\tif (!desc || typeof desc.get === 'undefined') {\n\t\tObject.defineProperty(tag, 'body', {\n\t\t\tset(val) {\n\t\t\t\ttag.__i = val;\n\t\t\t\tsetElementAttr(tag);\n\t\t\t\ttrigger('--zino-rerender-tag', tag.getHost());\n\t\t\t},\n\t\t\tget() { return tag.__i; }\n\t\t});\n\t}\n\ttag.__s = tag.setAttribute;\n\ttag.setAttribute = function(attr, val) {\n\t\tdefineAttribute(this, attr, val);\n\t\ttrigger('--zino-rerender-tag', this);\n\t};\n\n\t// call mount callback\n\ttag.props = merge({}, functions.props, getAttributes(tag, true));\n\ttag.attrs = getAttributes(tag);\n\n\ttry {\n\t\ttag.mounting = true;\n\t\tfunctions.mount.call(tag);\n\t\tdelete tag.mounting;\n\t} catch (e) {\n\t\tthrow new Error('Unable to call mount function for ' + tag.tagName + ': ' + (e.message || e));\n\t}\n}\n\nfunction renderTag(tag, registryEntry = tagRegistry[tag.tagName.toLowerCase()]) {\n\tlet events = [],\n\t\trenderCallbacks = [],\n\t\trenderedSubElements = [],\n\t\trenderedDOM;\n\n\t// do the actual rendering of the component\n\tvdom.setDataResolver(renderOptions.resolveData);\n\tvdom.clearTagsCreated();\n\tlet data = getAttributes(tag);\n\tif (isFn(registryEntry.render)) {\n\t\t// tell the vdom which tags to remember to look for\n\t\tvdom.setFilter(Object.keys(tagRegistry));\n\t\trenderedDOM = vdom.Tag('div', {'class': '-shadow-root'}, registryEntry.render.call(tag, data));\n\t} else {\n\t\tthrow new Error('No render function provided in component ' + tag.tagName);\n\t}\n\n\t// unmount previously rendered sub components\n\ttag.__subs && tag.__subs.forEach(unmountTag);\n\n\t// render all contained sub components\n\t// retrieve the tags that the vdom was made aware of (all our registered components)\n\trenderedSubElements = vdom.getTagsCreated();\n\trenderedSubElements.forEach(subEl => {\n\t\t// initialize them all\n\t\tlet subElEvents = initializeTag.call({\n\t\t\tnoRenderCallback: true,\n\t\t\tnoEvents: true\n\t\t}, subEl, tagRegistry[subEl.tagName]);\n\t\tif (subElEvents) {\n\t\t\trenderedSubElements = renderedSubElements.concat(subElEvents.subElements);\n\t\t\tevents = events.concat(subElEvents.events);\n\t\t\trenderCallbacks = renderCallbacks.concat(subElEvents.renderCallbacks);\n\t\t}\n\t});\n\n\tif (tag.attributes.__ready && (Math.abs(renderedDOM.__complexity - (tag.__complexity || 0)) < 50) && tag.ownerDocument) {\n\t\t// has been rendered before, so just apply diff\n\t\tvdom.applyDOM(tag.children[0], renderedDOM, tag.ownerDocument);\n\t} else {\n\t\t// simply render everything inside\n\t\tif (tag.ownerDocument) {\n\t\t\ttag.children[0].innerHTML = vdom.getInnerHTML(renderedDOM);\n\t\t} else {\n\t\t\ttag.children[0] = renderedDOM;\n\t\t}\n\t}\n\ttag.__subs = renderedSubElements;\n\ttag.__vdom = renderedDOM;\n\ttag.__complexity = renderedDOM.__complexity;\n\n\t// if we have rendered any sub components, retrieve their actual DOM node\n\trenderedSubElements.length > 0 && (tag.querySelectorAll && [].slice.call(tag.querySelectorAll('[__ready]')) || []).forEach((subEl, index) => {\n\t\t// apply all additional functionality to them (custom functions, attributes, etc...)\n\t\tmerge(subEl, renderedSubElements[index]);\n\t\t// update getHost to return the DOM node instead of the vdom node\n\t\tsubEl.getHost = renderedSubElements[index].getHost = defaultFunctions.getHost.bind(subEl);\n\t});\n\ttag.isRendered = true;\n\n\t// if this is not a sub component's rendering run\n\tif (!this || !this.noRenderCallback) {\n\t\t// call all of our sub component's render functions\n\t\trenderCallbacks.forEach(callback => callback.fn.call(callback.tag.getHost()));\n\t\t// call our own rendering function\n\t\tregistryEntry.functions.render.call(tag);\n\t} else {\n\t\t// just add this sub component's rendering function to the list\n\t\trenderCallbacks.push({fn: registryEntry.functions.render, tag});\n\t}\n\treturn {events, renderCallbacks, data, subElements: renderedSubElements};\n}\n\nfunction attachSubEvents(subEvents, tag) {\n\tvar count = {};\n\tsubEvents.events.forEach(event => {\n\t\tlet el = event.tag;\n\t\tif (!isObj(el)) {\n\t\t\tcount[el] = (count[el] || 0) + 1;\n\t\t\tel = tag.querySelectorAll(el)[count[el] - 1];\n\t\t}\n\t\tif (!el.children[0].__eventsAttached) {\n\t\t\tattachEvent(el.children[0], event.childEvents, el);\n\t\t\tattachEvent(el, event.hostEvents, el);\n\t\t\tel.children[0].__eventsAttached = true;\n\t\t}\n\t\tisFn(el.onready) && el.onready.call(el);\n\t});\n}\n\nfunction unmountTag(tag) {\n\tlet name = (tag.tagName || '').toLowerCase(),\n\t\tentry = tagRegistry[name];\n\tif (entry) {\n\t\t[].forEach.call(tag.nodeType === 1 && tag.attributes || Object.keys(tag.attributes).map(attr => tag.attributes[attr]), attr => {\n\t\t\t// cleanup saved data\n\t\t\tif (attr.name.indexOf('data-') >= 0) {\n\t\t\t\tdelete dataRegistry[attr.value];\n\t\t\t}\n\t\t});\n\t\ttry {\n\t\t\tentry.functions.unmount.call(tag);\n\t\t} catch (e) {\n\t\t\tthrow new Error('Unable to unmount tag ' + name + ': ' + (e.message || e));\n\t\t}\n\t}\n}\n\nfunction getAttributes(tag, propsOnly) {\n\tlet attrs = {props: tag.props, element: tag.element, styles: tag.styles, body: tag.__i},\n\t\tprops = attrs.props;\n\n\t[].forEach.call(tag.nodeType === 1 && tag.attributes || Object.keys(tag.attributes).map(attr => tag.attributes[attr]), attribute => {\n\t\tlet isComplex = attribute.name.indexOf('data-') >= 0 && typeof attribute.value === 'string' && attribute.value.substr(0, 2) === '--';\n\t\tlet value = attribute.value;\n\t\tattrs[attribute.name] || (attrs[attribute.name] = isComplex && typeof value === 'string' && dataRegistry[value.replace(/^--|--$/g, '')] || value);\n\t\tif (attribute.name.indexOf('data-') === 0) {\n\t\t\tprops[attribute.name.replace(/^data-/g, '').replace(/(\\w)-(\\w)/g, (g, m1, m2) => m1 + m2.toUpperCase())] = attrs[attribute.name];\n\t\t}\n\t});\n\n\tif (propsOnly) return props;\n\treturn attrs;\n}\n\nfunction setElementAttr(source, target = source) {\n\tlet baseAttrs = {};\n\t[].forEach.call(source.children, el => {\n\t\tif (!el.tagName) return;\n\t\tlet name = el.tagName.toLowerCase();\n\t\tif (baseAttrs[name]) {\n\t\t\tif (!baseAttrs[name].isArray) {\n\t\t\t\tbaseAttrs[name] = [baseAttrs[name]];\n\t\t\t\tbaseAttrs[name].isArray = true;\n\t\t\t}\n\t\t\tbaseAttrs[name].push(el);\n\t\t} else {\n\t\t\tbaseAttrs[name] = el;\n\t\t}\n\t});\n\ttarget.element = baseAttrs;\n}\n\nfunction handleStyles(element) {\n\tlet tagName = element.tagName;\n\tlet styles = (element.styles || []).map(style => {\n\t\t\tlet code = style;\n\t\t\treturn code.replace(/[\\r\\n]*([^%\\{;\\}]+?)\\{/gm, (global, match) => {\n\t\t\t\tif (match.trim().match(/^@/)) {\n\t\t\t\t\treturn match + '{';\n\t\t\t\t}\n\t\t\t\tvar selectors = match.split(',').map(selector => {\n\t\t\t\t\tselector = selector.trim();\n\t\t\t\t\tif (selector.match(/:host\\b/) ||\n\t\t\t\t\t\tselector.match(new RegExp(`^\\\\s*${tagName}\\\\b`)) ||\n\t\t\t\t\t\tselector.match(/^\\s*(?:(?:\\d+%)|(?:from)|(?:to)|(?:@\\w+)|\\})\\s*$/)) {\n\t\t\t\t\t\treturn selector;\n\t\t\t\t\t}\n\t\t\t\t\treturn tagName + ' ' + selector;\n\t\t\t\t});\n\t\t\t\treturn global.replace(match, selectors.join(','));\n\t\t\t}).replace(/:host\\b/gm, tagName) + '\\n';\n\t\t}).join('\\n');\n\ttrigger('publish-style', {styles, tagName});\n}\n\non('--zino-initialize-node', initializeNode);\non('--zino-unmount-tag', unmountTag);\non('--zino-mount-tag', mount);\n","import {trigger, on, off} from './events';\n\nconst tagRegExp = /<(\\/?)([\\w-]+)([^>]*?)(\\/?)>/g;\nconst attrRegExp = /([\\w_-]+)(?:=(?:'([^']*?)'|\"([^\"]*?)\"))?/g;\nconst commentRegExp = /<!--(?:[^-]|-[^-])*-->/g;\nconst syntax = /\\{\\{\\s*([^\\}]+)\\s*\\}\\}\\}?/g;\n\n/* helper functions to be used inside the generated code */\n\n/** @function safeAccess\n * safely access the given property in the object obj.\n * \n * @param obj (Object) - the object to read the property from\n * @param attrs (String) - the name of the property to access (allows for object paths via ., e.g. \"myprop.firstValue\")\n * @param escape (Boolean) - if the value should be HTML escaped to prevent XSS attacks and such\n * @return any\n */\nconst safeAccess = 'function safeAccess(t,e,r){if(!e)return t;if(\".\"===e[0])return t[e];for(e=e.split(\".\");e.length>0&&void 0!==(t=t[e.shift()]););return\"string\"==typeof t&&r===!0?t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/\"/g,\"&quot;\").replace(/>/g,\"&gt;\"):\"function\"==typeof t?t.call(__i):\"number\"==typeof t?t:t||\"\"}'/*`function safeAccess(obj, attrs, escape) {\n\tif (!attrs) return obj;\n\tif (attrs[0] === '.') {\n\t\treturn obj[attrs];\n\t}\n\tattrs = attrs.split('.');\n\twhile (attrs.length > 0 && typeof (obj = obj[attrs.shift()]) !== 'undefined');\n\tif (typeof obj === 'string' && escape === true) {\n\t\treturn obj.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/>/g, '&gt;');\n\t} else if (typeof obj === 'function') {\n\t\treturn obj.call(instance);\n\t} else {\n\t\treturn typeof obj === 'number' ? obj : (obj || '');\n\t}\n}`*/;\n\n/** @function toArray\n * turn property value of an object into an array\n * \n * @param data (Object) - the object to read the property value from\n * @param value (String) - the property whose value should be read from the object\n * @return Array\n */\nconst toArray = 'function toArray(t,e){var r=safeAccess(t,e);return r?\"[object Array]\"===Object.prototype.toString.call(r)?r:\"function\"==typeof r?r():[r]:[]}'/*`function toArray(data, value) {\n\tvar dataValue = safeAccess(data, value);\n\tif (dataValue) {\n\t\tif (Object.prototype.toString.call(dataValue) === '[object Array]') {\n\t\t\treturn dataValue;\n\t\t} else if (typeof dataValue === 'function') {\n\t\t\treturn dataValue();\n\t\t} else return [dataValue];\n\t} else {\n\t\treturn [];\n\t}\n}`*/;\n\n/** @function spread\n * turns an array of arrays into an array of all containing elements (reduces the array depth by 1)\n * \n * @param array (Array) - the array to spread the values along\n * @return Array - a new array containing all the values of the sub elements\n */\nconst spread = 'function spread(t){var e=[];return t.forEach(function(t){e=e.concat(t)}),e}'/*`function spread(array) {\n\tvar result = [];\n\tarray.forEach(function(entry) {\n\t\tresult = result.concat(entry);\n\t});\n\treturn result;\n}`*/;\n\n/** @function merge\n * merges any number of objects into the target object\n * @param target (Object) - the object the other object should be merged into\n * @param obj1 (Object) - the first object to be merged into the target object\n * @param objn (Object) - all nth object to be merged into the target object\n * @return Object - the target object\n */\nconst merge = 'function merge(t){return[].slice.call(arguments,1).forEach(function(e){for(var r in e)t[r]=e[r]}),t}'/*`function merge(target) {\n\t[].slice.call(arguments, 1).forEach(function (arg) {\n\t\tfor (var all in arg) {\n\t\t\ttarget[all] = arg[all];\n\t\t}\n\t});\n\n\treturn target;\n}`*/;\n\n/** @function renderStyle\n * transforms an object into CSS properties\n * \n * @param value (Object) - the object to be transformed\n * @param context (Object) - for any functions defined in the object, context will be provided within as `this`\n * @return String - the CSS property list separated by semicolon\n */\nconst renderStyle = 'function renderStyle(t,r){var e=\"\";if(transform=function(t){return\"function\"==typeof t?transform(t.apply(r)):t+(\"number\"==typeof t&&null!==t?r.styles&&r.styles.defaultUnit||\"px\":\"\")},\"object\"==typeof t)for(var n in t)e+=n.replace(/[A-Z]/g,function(t){return\"-\"+t.toLowerCase()})+\":\"+transform(t[n])+\";\";return e}'/*`function renderStyle(value, context) {\n\tvar style = '';\n\t\ttransform = function(val) {\n\t\t\tif (typeof val === 'function') return transform(val.apply(context));\n\t\t\treturn val + (typeof val === 'number' && val !== null ? context.styles && context.styles.defaultUnit || 'px' : '');\n\t\t};\n\n\tif (typeof value === 'object') {\n\t\tfor (var all in value) {\n\t\t\tstyle += all.replace(/[A-Z]/g, function(g){ return '-' + g.toLowerCase()}) + ':' + transform(value[all]) + ';';\n\t\t}\n\t}\n\n\treturn style;\n}`*/;\n\n/* this is the base structure of a Zino tag */\nconst baseCode = 'function (Tag,Zino){var __i;{{helperFunctions}};return{tagName:\"{{tagName}}\",{{styles}}render:function(data){return __i=this,[].concat({{render}})},functions:{{functions}}}}'/*`function(Tag, Zino) {\n\tvar instance = null;\n\t{{helperFunctions}}\n\n\treturn {\n\t\ttagName: '{{tagName}}',\n\t\t{{styles}}\n\t\trender: function(data) {\n\t\t\tinstance = this;\n\t\t\treturn [].concat({{render}})\n\t\t},\n\n\t\tfunctions: {{functions}}\n\t};\n}`*/;\n\n/** takes an HTML string containing mustache code and turns it into executable JS code that generates a vdom */\nexport function parse(data) {\n\tlet resultObject = {\n\t\tstyles: [],\n\t\thelperFunctions: [safeAccess],\n\t\ttagName: '',\n\t\trender: '',\n\t\tfunctions: []\n\t};\n\tlet usesMerge = false, usesRenderStyle = false, usesSpread = false;\n\tlet match, lastIndex = 0, level = 0, tagStack = [];\n\n\t// return the correct data level for multi-level mustache blocks\n\tfunction getData() {\n\t\treturn `data${level === 0 ? '' : '$' + level}`;\n\t}\n\n\t// text is the only place where mustache code can be found\n\tfunction handleText(text, isAttr) {\n\t\tlet match, result = '', lastIndex = 0;\n\t\tlet cat = isAttr ? ' + ' : ', ';\n\t\tif (!text.match(syntax)) {\n\t\t\treturn result += \"'\" + text.substr(lastIndex).replace(/\\n/g, '').replace(/'/g, '\\\\\\'') + \"'\" + cat;\n\t\t}\n\t\t// locate mustache syntax within the text\n\t\twhile (match = syntax.exec(text)) {\n\t\t\tif (match.index < lastIndex) continue;\n\t\t\tlet frag = text.substring(lastIndex, match.index).replace(/^\\s+/g, '');\n\t\t\tif (frag.length > 0) {\n\t\t\t\tresult += \"'\" + frag.replace(/\\n/g, '').replace(/'/g, '\\\\\\'') + \"'\" + cat;\n\t\t\t}\n\t\t\tlastIndex = match.index + match[0].length;\n\t\t\tlet key = match[1];\n\t\t\t// of \"{{#test}}\" value will be \"test\"\n\t\t\tlet value = key.substr(1);\n\t\t\tif (key[0] === '#') {\n\t\t\t\t// handle block start\n\t\t\t\tresult += `spread(toArray(${getData()}, '${value}').map(function (e, i, a) {\n\t\t\t\t\t\tvar data$${level + 1} = merge({}, data${0 >= level ? '' : '$' + level}, {'.': e, '.index': i, '.length': a.length}, e);\n\t\t\t\t\t\treturn [].concat(`;\n\t\t\t\tlevel += 1;\n\t\t\t\tusesMerge = true;\n\t\t\t\tusesSpread = true;\n\t\t\t} else if (key[0] === '/') {\n\t\t\t\t// handle block end\n\t\t\t\tresult += '\\'\\'); }))' + (isAttr ? '.join(\"\")' : '') + cat;\n\t\t\t\tlevel -= 1;\n\t\t\t\tif (level < 0) {\n\t\t\t\t\tthrow new Error('Unexpected end of block: ' + key.substr(1));\n\t\t\t\t}\n\t\t\t} else if (key[0] === '^') {\n\t\t\t\t// handle inverted block start\n\t\t\t\tresult += `(safeAccess(${getData()}, '${value}') && (typeof safeAccess(${getData()}, '${value}') === 'boolean' || safeAccess(${getData()}, '${value}').length > 0)) ? '' : spread([1].map(function() { var data$${level + 1} = merge({}, data${0 >= level ? '' : '$' + level}); return [].concat(`;\n\t\t\t\tusesSpread = true;\n\t\t\t\tlevel += 1;\n\t\t\t} else if (key[0] === '%') {\n\t\t\t\t// handle style rendering \"{{%myvar}}\" - only to be used for attribute values!\n\t\t\t\tresult += key.substr(1).split(/\\s*,\\s*/).map(value => `renderStyle(safeAccess(${getData()}, '${value}'), ${getData()})`).join(' + ');\n\t\t\t\tusesRenderStyle = true;\n\t\t\t} else if (key[0] === '+') {\n\t\t\t\t// handle deep data transfer \"{{+myvar}}\"\n\t\t\t\tresult += `safeAccess(${getData()}, '${value}')${cat}`;\n\t\t\t} else if (key[0] !== '{' && key[0] !== '!') {\n\t\t\t\t// handle non-escaping prints \"{{{myvar}}}\"\n\t\t\t\tvalue = key;\n\t\t\t\tresult += `''+safeAccess(${getData()}, '${value}', true)${cat}`\n\t\t\t} else if (key[0] !== '!') {\n\t\t\t\t// regular prints \"{{myvar}}\"\n\t\t\t\tresult += `''+safeAccess(${getData()}, '${value}')${cat}`;\n\t\t\t} // ignore comments\n\t\t}\n\t\tif (text.substr(lastIndex).length > 0) {\n\t\t\tresult += \"'\" + text.substr(lastIndex).replace(/\\n/g, '').replace(/'/g, '\\\\\\'') + \"'\" + cat;\n\t\t}\n\t\treturn result;\n\t}\n\n\t// generate attribute objects for vdom creation\n\tfunction makeAttributes(attrs) {\n\t\tlet attributes = '{';\n\t\tlet attr;\n\n\t\twhile ((attr = attrRegExp.exec(attrs))) {\n\t\t\tif (attributes !== '{') attributes += ', ';\n\t\t\tattributes += '\"' + attr[1].toLowerCase() + '\": ' + handleText(attr[2] || attr[3] || '', true).replace(/\\s*[,+]\\s*$/g, '');\n\t\t}\n\t\treturn attributes + '}';\n\t}\n\n \t// clean up code\n\ton('--zino-addscript', content => {\n\t\tcontent = content.trim().replace(/;$/,'').replace(/(['\"`])([^\\1\\n]*)\\1/gm, (g,m,c) => g.replace(c, c.replace(/\\/\\//g, '\\\\/\\\\/'))).replace(/\\/\\/.*$/gm, '');\n\t\tif (content.trim()) {\n\t\t\tresultObject.functions.push(content);\n\t\t\tusesMerge = true;\n\t\t}\n\t});\t \n\t// handle all scripts and styles\n\tdata = data.replace(commentRegExp, '').replace(/<(script|style)(\\s+[^>]*?)?>((?:.|\\n)*?)<\\/\\1>/gi, (g, x, a, m) => {\n\t\tif (x === 'style') {\n\t\t\tresultObject.styles.push(m);\n\t\t} else {\n\t\t\tif (a && a.match(/\\s+src=(?:(?:'([^']+)')|(?:\"([^\"]+)\"))/g)) {\n\t\t\t\ttrigger('publish-script', RegExp.$1 || RegExp.$2);\n\t\t\t} else {\n\t\t\t\ttrigger('--zino-addscript', m);\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}).trim();\n\toff('--zino-addscript');\n\n\t// check if we have an actual HTML component code (looking for the starting tag)\n\tif (!data.match(tagRegExp)) {\n\t\tthrow new Error('No proper component provided');\n\t}\n\t// find out how the component is called\n\tresultObject.tagName = data.match(/^<([\\w_-]+)>/)[1].toLowerCase();\n\n\t// loop through all HTML tags in code\n\twhile (match = tagRegExp.exec(data)) {\n\t\t// skip the ones we already processed\n\t\tif (match.index < lastIndex) continue;\n\t\tlet text = data.substring(lastIndex, match.index).replace(/^[ \\t]+|[ \\t]$/g, ' ').trim();\n\t\tlastIndex = match.index + match[0].length;\n\t\t// if we have some leading text (before the first tag)\n\t\tif (text.length > 0) {\n\t\t\t// it must be a text node\n\t\t\tresultObject.render += handleText(text);\n\t\t}\n\t\t// if we found the tag's definition, skip it\n\t\tif (match[2] === resultObject.tagName) continue;\n\t\tif (match[1]) {\n\t\t\t// closing tag\n\t\t\tlet expected = tagStack.pop();\n\t\t\tif (expected !== match[2]) {\n\t\t\t\tthrow new Error('Unexpected end of tag: ' + match[2] + '; expected to end ' + expected);\n\t\t\t}\n\t\t\tresultObject.render = resultObject.render.replace(/,\\s*$/g, '') + ')), ';\n\t\t} else {\n\t\t\t// opening tag\n\t\t\ttagStack.push(match[2]);\n\t\t\tlet attributes = makeAttributes(match[3]);\n\t\t\tresultObject.render += `new Tag('${match[2]}', ${attributes}`;\n\t\t\tif (!match[4]) {\n\t\t\t\t// not a self-closing tag, so prepare for it's content\n\t\t\t\tresultObject.render += ', [].concat(';\n\t\t\t} else {\n\t\t\t\t// self-closing tag, close it immediately\n\t\t\t\tresultObject.render += '), ';\n\t\t\t\ttagStack.pop();\n\t\t\t}\n\t\t}\n\t}\n\tif (tagStack.length > 0) {\n\t\tthrow new Error('Unclosed tags: ' + tagStack.join(', '));\n\t}\n\tif (level > 0) {\n\t\tthrow new Error('Unexpected end of block');\n\t}\n\t// if we have content after the last found tag node\n\tif (data.substr(lastIndex).trim().length > 0) {\n\t\t// it must be a text node\n\t\tresultObject.render += handleText(data.substr(lastIndex).replace(/^[ \\t]+|[ \\t]$/g, ' ').trim());\n\t}\n\tresultObject.render = resultObject.render.replace(/,\\s*$/g, '');\n\n\t// add helper functions that were used by the code\n\tif (usesMerge) {\n\t\tresultObject.helperFunctions.push(merge);\n\t\tresultObject.helperFunctions.push(toArray);\n\t}\n\tif (usesSpread) {\n\t\tresultObject.helperFunctions.push(spread);\n\t}\n\tif (usesRenderStyle) {\n\t\tresultObject.helperFunctions.push(renderStyle);\n\t}\n\tresultObject.functions = resultObject.functions.length > 0 ? 'merge({}, ' + (resultObject.functions.join(', ') || '{}') + ')' : '{}';\n\tresultObject.styles = resultObject.styles.length > 0 ? 'styles: ' + JSON.stringify(resultObject.styles) + ',' : '';\n\tresultObject.helperFunctions = resultObject.helperFunctions.join('\\n');\n\n\t// fill in place-holders in base code and return the result\n\treturn baseCode.replace(/\\{\\{([^\\}]+)\\}\\}/g, (g, m) => resultObject[m]);\n}\n","import {registerTag, render} from './core';\nimport {parse} from './mustacheparser';\nimport {emptyFunc, isObj} from './utils';\nimport {on, one, off, trigger} from './events';\n\nlet urlRegistry = window.zinoTagRegistry || {},\n\tZino,\n\tdirtyTags = [],\n\ttagObserver = new MutationObserver(records => {\n\t\trecords.forEach(record => {\n\t\t\tlet added = record.addedNodes,\n\t\t\t\tremoved = record.removedNodes;\n\n\t\t\tif (added.length > 0) {\n\t\t\t\t[].forEach.call(added, tag => trigger('--zino-mount-tag', tag));\n\t\t\t} else if (removed.length > 0) {\n\t\t\t\t[].forEach.call(removed, tag => {\n\t\t\t\t\t(tag.children && $('[__ready]', tag) || []).concat(tag).forEach(subTag => trigger('--zino-unmount-tag', subTag));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\nfunction $(selector, context) {\n\treturn [].slice.call(context.querySelectorAll(selector));\n}\n\nexport default Zino = {\n\ton, one, off, trigger,\n\n\tfetch(url, callback, cache, code) {\n\t\tif (cache && urlRegistry[url] && !urlRegistry[url].callback) {\n\t\t\treturn callback(urlRegistry[url], 200);\n\t\t} else if (isObj(urlRegistry[url])) {\n\t\t\treturn urlRegistry[url].callback.push(callback);\n\t\t}\n\t\turlRegistry[url] = code || {\n\t\t\tcallback: [callback]\n\t\t};\n\t\tif (code) return;\n\t\tlet req = new XMLHttpRequest();\n\t\treq.open('GET', url, true);\n\t\treq.onreadystatechange = () => {\n\t\t\tif (req.readyState === 4) {\n\t\t\t\tlet callbacks = urlRegistry[url].callback;\n\t\t\t\tif (req.status === 200) {\n\t\t\t\t\turlRegistry[url] = req.responseText;\n\t\t\t\t}\n\t\t\t\tif (!cache) delete urlRegistry[url];\n\t\t\t\tcallbacks.forEach(cb => cb(req.responseText, req.status));\n\t\t\t}\n\t\t};\n\t\treq.send();\n\t},\n\n\timport: function(path, callback = emptyFunc) {\n\t\tconst register = (code) => {\n\t\t\tcode && registerTag(code, document.body, Zino);\n\t\t\tcallback();\n\t\t};\n\n\t\tlet url = (this.path || '') + path;\n\t\tif (typeof path !== 'string') return register(path); \n\t\tZino.fetch(url, (data, status) => {\n\t\t\tlet path = url.replace(/[^\\/]+$/g, '');\n\t\t\tif (status === 200) {\n\t\t\t\tlet code;\n\t\t\t\ttry {\n\t\t\t\t\t// if we have HTML input\n\t\t\t\t\tif (data.trim().indexOf('<') === 0) {\n\t\t\t\t\t\t// convert it to JS\n\t\t\t\t\t\tdata = parse(data);\n\t\t\t\t\t}\n\t\t\t\t\tcode = new Function('return ' + data.replace(/url\\((\\\\*['\"])?(.*?)\\1\\)/g, function(g, quote, url) {\n\t\t\t\t\t\t\tif (url.indexOf('data:') === 0 || url.indexOf('http') === 0 || url.indexOf('//') === 0 || url.indexOf('/') === 0) return g;\n\t\t\t\t\t\t\treturn 'url(' + path + url + ')';\n\t\t\t\t\t\t}).replace(/\\bZino.import\\s*\\(/g, 'Zino.import.call({path: ' + JSON.stringify(path) + '}, ').trim().replace(/;$/, ''))();\n\t\t\t\t} catch(e) {\n\t\t\t\t\te.message = 'Unable to import tag ' + url.replace(/.*\\//g, '') + ': ' + e.message;\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t\tregister(code);\n\t\t\t}\n\t\t}, true);\n\t}\n};\nwindow.Zino = Zino;\non('publish-style', data => {\n\tif (typeof data.tagName === 'string' && data.styles.length > 0) {\n\t\tif (document.getElementById('style:' + data.tagName)) return;\n\t\tlet style = document.createElement('style');\n\t\tstyle.innerHTML = data.styles;\n\t\tstyle.id = 'style:' + data.tagName;\n\t\tdocument.head.appendChild(style);\n\t}\n});\non('--zino-rerender-tag', tag => dirtyTags.indexOf(tag) < 0 && dirtyTags.push(tag));\ntrigger('publish-style', '[__ready] { contain: content; }');\n$('[rel=\"zino-tag\"]', document).forEach(tag => Zino.import(tag.href));\ntagObserver.observe(document.body, {\n\tsubtree: true,\n\tchildList: true\n});\n\nrequestAnimationFrame(function reRender() {\n\twhile (dirtyTags.length > 0) {\n\t\trender(dirtyTags.shift());\n\t}\n\trequestAnimationFrame(reRender);\n});\n"]}