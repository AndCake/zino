{"version":3,"sources":["src/utils.js","src/events.js","src/mustacheparser.js","src/browser.js","src/vdom.js","src/core.js","src/zino-light.js","src/facade.js","src/zino.js"],"names":["merge","target","args","Array","_len","_key","arguments","arg","len","length","index","all","HTMLElement","propDetails","value","writable","obj","attribute","isObj","Object","getOwnPropertyDescriptor","uuid","replace","c","r","Math","random","toString","toArray","startIdx","prototype","slice","call","publishEvent","type","data","name","indexOf","trigger","eventQueue","result","on","fn","push","off","isFn","one","self","apply","this","handleStyles","tagName","styles","map","style","global","match","trim","selectors","split","selector","RegExp","join","parse","getData","level","handleText","text","isAttr","lastIndex","cat","syntax","substr","exec","frag","substring","key","Error","resultObject","safeAccess","usesMerge","usesRenderStyle","usesSpread","tagStack","content","g","m","functions","commentRegExp","x","a","$1","$2","tagRegExp","toLowerCase","render","expected","pop","attributes","attrs","attr","attrRegExp","helperFunctions","spread","renderStyle","JSON","stringify","baseCode","attachEvent","el","events","host","addEventListener","findEl","node","querySelectorAll","parentNode","forEach","eventObj","keys","handlers","event","e","getHost","attachSubEvents","subEvents","tag","count","children","__eventsAttached","childEvents","hostEvents","isArray","hashCode","str","hash","i","chr","charCodeAt","setDataResolver","resolver","Tag","attributeHash","babelHelpers.typeof","dataResolver","filter","child","__hash","tagFilter","tagsCreated","setFilter","clearTagsCreated","getTagsCreated","getInnerHTML","HTMLCollection","_typeof","concat","createElement","document","createTextNode","setAttribute","innerHTML","applyText","domChild","dom","childNodes","html","replaceChild","applyDOM","vdom","getAttribute","id","removeAttribute","appendChild","nodeType","nodeValue","removeChild","registerTag","Zino","firstElement","beginning","__zino","props","onrender","emptyFunc","onmount","onunmount","tagRegistry","getElementsByTagName","initializeTag","defaultFunctions","mount","ignoreRender","entry","noEvents","renderTag","registryEntry","__vdom","sibling","className","__i","isRendered","ownerDocument","createNode","isNotSelf","__ready","__subs","actual","onready","defineAttribute","initializeNode","_ref","undefined","_ref$node","bind","desc","get","defineProperty","val","getAttributes","mounting","message","dataToString","depth","num","res","dataList","renderCallbacks","renderedSubElements","renderedDOM","resolveData","__dataHash","subElements","class","unmount","idx","subEl","subElEvents","splice","inconsistent","ready","info","noRenderCallback","callback","dataRegistry","propsOnly","element","body","isComplex","resolveDataKey","m1","m2","toUpperCase","setElementAttr","source","baseAttrs","loopList","start","list","action","shift","NodeList","performance","now","identity","oldID","setProps","attrName","loadComponent","path","runCode","code","setDocument","actions","getElementById","head","urlRegistry","window","zinoTagRegistry","dirtyTags","mountTags","parseCode","tagObserver","MutationObserver","records","record","added","addedNodes","removed","removedNodes","newValues","zinoDataRegistry","isBrowser","isServer","fetch","url","cache","req","XMLHttpRequest","open","onreadystatechange","readyState","callbacks","status","responseText","cb","send","Function","quote","doc","browser","import","href","observe","requestAnimationFrame","reRender"],"mappings":"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","file":"zino.min.js","sourcesContent":["/**\n * Merges all objects provided as parameters into the first parameter object\n *\n * @param  {...Object} args list of arguments\n * @return {Object}         the merged object (same as first argument)\n */\nexport function merge (target, ...args) {\n\tfor (let arg, len = args.length, index = 0; arg = args[index], index < len; index += 1) {\n\t\tfor (let all in arg) {\n\t\t\tif ((typeof HTMLElement !== 'undefined' && arg instanceof HTMLElement) || typeof propDetails(arg, all).value !== 'undefined' && (!target[all] || propDetails(target, all).writable)) {\n\t\t\t\tif (all !== 'attributes') target[all] = arg[all];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn target;\n}\n\nfunction propDetails(obj, attribute) {\n\treturn isObj(obj) && Object.getOwnPropertyDescriptor(obj, attribute) || {};\n}\n\n/**\n * Creates a diff of two JS objects. Includes attribute position check.\n *\n * @param  {Object} objA\tthe object to be compared\n * @param  {Object} objB \tthe object to compare with\n * @return {Object,Boolean} false if both objects are deep equal, else the values of what is different\n */\nexport function objectDiff(objA, objB) {\n\tlet result = {},\n\t\tpartialDiff;\n\n\tif (!objA) return objB || false;\n\tif (!objB) return objA || false;\n\tObject.keys(objA).forEach((key, index) => {\n\t\tif (['__vdom', 'element', 'parentNode', 'innerHTML', 'outerHTML', 'className'].indexOf(key) >= 0 || isFn(objA[key])) return;\n\t\tif (typeof objB[key] === 'undefined') {\n\t\t\tresult[key] = objA[key];\n\t\t} else if (Object.keys(objB)[index] !== key) {\n\t\t\tlet bKey = Object.keys(objB)[index];\n\t\t\tresult[bKey] = objB[bKey];\n\t\t\tresult[key] = objA[key];\n\t\t} else if (typeof objA[key] !== 'object' || typeof objB[key] !== 'object') {\n\t\t\tif (objA[key] !== objB[key]) {\n\t\t\t\tresult[key] = objB[key];\n\t\t\t}\n\t\t} else if (partialDiff = objectDiff(objA[key], objB[key])) {\n\t\t\tresult[key] = partialDiff;\n\t\t}\n\t});\n\tObject.keys(objB).forEach((key, index) => {\n\t\tif (['__vdom', 'element', 'parentNode', 'innerHTML', 'outerHTML', 'className'].indexOf(key) >= 0 || isFn(objB[key])) return;\n\t\tif (typeof objA[key] === 'undefined') {\n\t\t\tresult[key] = objB[key];\n\t\t}\n\t});\n\tif (Object.keys(result).length > 0) return result;\n\treturn false;\n}\n\nexport function error(method, tag, parentException) {\n\tif (!parentException) {\n\t\tparentException = tag;\n\t}\n\tparentException.message = 'Error while calling ' + method + (parentException !== tag ? ' function of ' + tag : '') + ': ' + (parentException.message || parentException);\n\tthrow parentException;\n}\n\n/**\n * Checks if the given arguments are the provided types, if they do no match, an exception is thrown.\n *\n * @param  {Array} args \tlist of arguments provided to callee\n * @param  {Array} types \tlist of data types expected for the provided arguments\n * @param  {String} api  \tname of the API (callee name)\n */\nexport function checkParams(args, types, api) {\n\tfor (var all in args) {\n\t\tif (types[all] && typeof args[all] !== types[all]) {\n\t\t\tthrow new Error('API mismatch while using ' + api + ': Parameter ' + all + ' was supposed to be ' + types[all] + ' but ' + (typeof args[all]) + ' was given.');\n\t\t}\n\t}\n}\n\n/**\n * makes sure that accessing attributes on an unknown data value is safe\n *\n * @param  {Mixed} obj \tdata to made safe for attribute access\n * @return {Object}     will always return an object\n */\nexport function safeAccess(obj) {\n\treturn obj || {};\n}\n\nexport function uuid() {\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n\t\tlet r = Math.random() * 16 | 0;\n\t\treturn (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n\t});\n}\n\nexport function toArray(obj, startIdx) {\n\treturn Array.prototype.slice.call(obj, startIdx || 0);\n}\n\nexport var isObj = obj => typeof obj === 'object';\nexport var isFn = fn => typeof fn === 'function';\nexport var emptyFunc = () => {};\nexport var identity = a => a;\n\nexport function isValue(obj, key) {\n\tlet descriptor = Object.getOwnPropertyDescriptor(obj, key);\n\treturn typeof descriptor.value !== 'undefined' && !isFn(descriptor.value);\n}\n","import {isFn} from './utils';\n\nlet eventQueue = {};\n\nfunction publishEvent(type, data) {\n\tdata.name.indexOf('--event-') && trigger('--event-' + type, data);\n}\n\nexport function trigger(name, data) {\n\tpublishEvent('trigger', {name, data});\n\tif (!eventQueue[name]) return;\n\tfor (let index in eventQueue[name]) {\n\t\tlet result = eventQueue[name][index](data);\n\t\tif (result === false) break;\n\t}\n}\n\nexport function on(name, fn) {\n\tif (!eventQueue[name]) {\n\t\teventQueue[name] = [];\n\t}\n\teventQueue[name].push(fn);\n\tpublishEvent('register', {name, fn});\n}\n\nexport function off(name, fn) {\n\tif (!isFn(fn)) {\n\t\tdelete eventQueue[name];\n\t\treturn publishEvent('unregister', {name});\n\t}\n\tfor (let index in eventQueue[name]) {\n\t\tif (eventQueue[name][index] === fn) {\n\t\t\tdelete eventQueue[name][index];\n\t\t\treturn publishEvent('unregister', {name, fn});\n\t\t}\n\t}\n}\n\nexport function one(name, fn) {\n\ton(name, function self() {\n\t\tfn.apply(this, arguments);\n\t\toff(name, self);\n\t});\n}\n","import {trigger, on, off} from './events';\n\nconst tagRegExp = /<(\\/?)([\\w-]+)([^>]*?)(\\/?)>/g;\nconst attrRegExp = /([\\w_-]+)(?:=(?:'([^']*?)'|\"([^\"]*?)\"))?/g;\nconst commentRegExp = /<!--(?:[^-]|-[^-])*-->/g;\nconst syntax = /\\{\\{\\s*([^\\}]+)\\s*\\}\\}\\}?/g;\n\n/* helper functions to be used inside the generated code */\n\n/** @function safeAccess\n * safely access the given property in the object obj.\n *\n * @param obj (Object) - the object to read the property from\n * @param attrs (String) - the name of the property to access (allows for object paths via ., e.g. \"myprop.firstValue\")\n * @param escape (Boolean) - if the value should be HTML escaped to prevent XSS attacks and such\n * @return any\n */\nconst safeAccess = 'function safeAccess(t,e,r){if(!e)return t;if(\".\"===e[0])return t[e];for(e=e.split(\".\");e.length>0&&void 0!==(t=t[e.shift()]););return\"string\"==typeof t&&r===!0?t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/\"/g,\"&quot;\").replace(/>/g,\"&gt;\"):\"function\"==typeof t?t.call(__i):\"number\"==typeof t?t:t||\"\"}'/*`function safeAccess(obj, attrs, escape) {\n\tif (!attrs) return obj;\n\tif (attrs[0] === '.') {\n\t\treturn obj[attrs];\n\t}\n\tattrs = attrs.split('.');\n\twhile (attrs.length > 0 && typeof (obj = obj[attrs.shift()]) !== 'undefined');\n\tif (typeof obj === 'string' && escape === true) {\n\t\treturn obj.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/>/g, '&gt;');\n\t} else if (typeof obj === 'function') {\n\t\treturn obj.call(instance);\n\t} else {\n\t\treturn typeof obj === 'number' ? obj : (obj || '');\n\t}\n}`*/;\n\n/** @function toArray\n * turn property value of an object into an array\n *\n * @param data (Object) - the object to read the property value from\n * @param value (String) - the property whose value should be read from the object\n * @return Array\n */\nconst toArray = 'function toArray(t,e){var r=safeAccess(t,e);return r?\"[object Array]\"===Object.prototype.toString.call(r)?r:\"function\"==typeof r?r():[r]:[]}'/*`function toArray(data, value) {\n\tvar dataValue = safeAccess(data, value);\n\tif (dataValue) {\n\t\tif (Object.prototype.toString.call(dataValue) === '[object Array]') {\n\t\t\treturn dataValue;\n\t\t} else if (typeof dataValue === 'function') {\n\t\t\treturn dataValue();\n\t\t} else return [dataValue];\n\t} else {\n\t\treturn [];\n\t}\n}`*/;\n\n/** @function spread\n * turns an array of arrays into an array of all containing elements (reduces the array depth by 1)\n *\n * @param array (Array) - the array to spread the values along\n * @return Array - a new array containing all the values of the sub elements\n */\nconst spread = 'function spread(t){var e=[];return t.forEach(function(t){e=e.concat(t)}),e}'/*`function spread(array) {\n\tvar result = [];\n\tarray.forEach(function(entry) {\n\t\tresult = result.concat(entry);\n\t});\n\treturn result;\n}`*/;\n\n/** @function merge\n * merges any number of objects into the target object\n * @param target (Object) - the object the other object should be merged into\n * @param obj1 (Object) - the first object to be merged into the target object\n * @param objn (Object) - all nth object to be merged into the target object\n * @return Object - the target object\n */\nconst merge = 'function merge(t){return[].slice.call(arguments,1).forEach(function(e){for(var r in e)t[r]=e[r]}),t}'/*`function merge(target) {\n\t[].slice.call(arguments, 1).forEach(function (arg) {\n\t\tfor (var all in arg) {\n\t\t\ttarget[all] = arg[all];\n\t\t}\n\t});\n\n\treturn target;\n}`*/;\n\n/** @function renderStyle\n * transforms an object into CSS properties\n *\n * @param value (Object) - the object to be transformed\n * @param context (Object) - for any functions defined in the object, context will be provided within as `this`\n * @return String - the CSS property list separated by semicolon\n */\nconst renderStyle = 'function renderStyle(t,r){var e=\"\";if(transform=function(t){return\"function\"==typeof t?transform(t.apply(r)):t+(\"number\"==typeof t&&null!==t?r.styles&&r.styles.defaultUnit||\"px\":\"\")},\"object\"==typeof t)for(var n in t)e+=n.replace(/[A-Z]/g,function(t){return\"-\"+t.toLowerCase()})+\":\"+transform(t[n])+\";\";return e}'/*`function renderStyle(value, context) {\n\tvar style = '';\n\t\ttransform = function(val) {\n\t\t\tif (typeof val === 'function') return transform(val.apply(context));\n\t\t\treturn val + (typeof val === 'number' && val !== null ? context.styles && context.styles.defaultUnit || 'px' : '');\n\t\t};\n\n\tif (typeof value === 'object') {\n\t\tfor (var all in value) {\n\t\t\tstyle += all.replace(/[A-Z]/g, function(g){ return '-' + g.toLowerCase()}) + ':' + transform(value[all]) + ';';\n\t\t}\n\t}\n\n\treturn style;\n}`*/;\n\n/* this is the base structure of a Zino tag */\nconst baseCode = 'function (Tag,Zino){var __i;{{helperFunctions}};return{tagName:\"{{tagName}}\",{{styles}}render:function(data){return __i=this,[].concat({{render}})},functions:{{functions}}}}'/*`function(Tag, Zino) {\n\tvar instance = null;\n\t{{helperFunctions}}\n\n\treturn {\n\t\ttagName: '{{tagName}}',\n\t\t{{styles}}\n\t\trender: function(data) {\n\t\t\tinstance = this;\n\t\t\treturn [].concat({{render}})\n\t\t},\n\n\t\tfunctions: {{functions}}\n\t};\n}`*/;\n\n/** parses style information from within a style tag makes sure it is localized */\nfunction handleStyles(tagName, styles) {\n\tstyles = (styles || []).map(style => {\n\t\t\tlet code = style;\n\t\t\treturn code.replace(/[\\r\\n]*([^%\\{;\\}]+?)\\{/gm, (global, match) => {\n\t\t\t\tif (match.trim().match(/^@/)) {\n\t\t\t\t\treturn match + '{';\n\t\t\t\t}\n\t\t\t\tvar selectors = match.split(',').map(selector => {\n\t\t\t\t\tselector = selector.trim();\n\t\t\t\t\tif (selector.match(/:host\\b/) ||\n\t\t\t\t\t\tselector.match(new RegExp(`^\\\\s*${tagName}\\\\b`)) ||\n\t\t\t\t\t\tselector.match(/^\\s*(?:(?:\\d+%)|(?:from)|(?:to)|(?:@\\w+)|\\})\\s*$/)) {\n\t\t\t\t\t\treturn selector;\n\t\t\t\t\t}\n\t\t\t\t\treturn tagName + ' ' + selector;\n\t\t\t\t});\n\t\t\t\treturn global.replace(match, selectors.join(','));\n\t\t\t}).replace(/:host\\b/gm, tagName) + '\\n';\n\t\t});\n\treturn styles;\n}\n\n/** takes an HTML string containing mustache code and turns it into executable JS code that generates a vdom */\nexport function parse(data) {\n\tlet resultObject = {\n\t\tstyles: [],\n\t\thelperFunctions: [safeAccess],\n\t\ttagName: '',\n\t\trender: '',\n\t\tfunctions: []\n\t};\n\tlet usesMerge = false, usesRenderStyle = false, usesSpread = false;\n\tlet match, lastIndex = 0, level = 0, tagStack = [];\n\n\t// return the correct data level for multi-level mustache blocks\n\tfunction getData() {\n\t\treturn `data${level === 0 ? '' : '$' + level}`;\n\t}\n\n\t// text is the only place where mustache code can be found\n\tfunction handleText(text, isAttr) {\n\t\tlet match, result = '', lastIndex = 0;\n\t\tlet cat = isAttr ? ' + ' : ', ';\n\t\tif (!text.match(syntax)) {\n\t\t\treturn result += \"'\" + text.substr(lastIndex).replace(/\\n/g, '').replace(/'/g, '\\\\\\'') + \"'\" + cat;\n\t\t}\n\t\t// locate mustache syntax within the text\n\t\twhile (match = syntax.exec(text)) {\n\t\t\tif (match.index < lastIndex) continue;\n\t\t\tlet frag = text.substring(lastIndex, match.index).replace(/^\\s+/g, '');\n\t\t\tif (frag.length > 0) {\n\t\t\t\tresult += \"'\" + frag.replace(/\\n/g, '').replace(/'/g, '\\\\\\'') + \"'\" + cat;\n\t\t\t}\n\t\t\tlastIndex = match.index + match[0].length;\n\t\t\tlet key = match[1];\n\t\t\t// of \"{{#test}}\" value will be \"test\"\n\t\t\tlet value = key.substr(1);\n\t\t\tif (key[0] === '#') {\n\t\t\t\t// handle block start\n\t\t\t\tresult += `spread(toArray(${getData()}, '${value}').map(function (e, i, a) {\n\t\t\t\t\t\tvar data$${level + 1} = merge({}, data${0 >= level ? '' : '$' + level}, {'.': e, '.index': i, '.length': a.length}, e);\n\t\t\t\t\t\treturn [].concat(`;\n\t\t\t\tlevel += 1;\n\t\t\t\tusesMerge = true;\n\t\t\t\tusesSpread = true;\n\t\t\t} else if (key[0] === '/') {\n\t\t\t\t// handle block end\n\t\t\t\tresult += '\\'\\'); }))' + (isAttr ? '.join(\"\")' : '') + cat;\n\t\t\t\tlevel -= 1;\n\t\t\t\tif (level < 0) {\n\t\t\t\t\tthrow new Error('Unexpected end of block: ' + key.substr(1));\n\t\t\t\t}\n\t\t\t} else if (key[0] === '^') {\n\t\t\t\t// handle inverted block start\n\t\t\t\tresult += `(safeAccess(${getData()}, '${value}') && (typeof safeAccess(${getData()}, '${value}') === 'boolean' || safeAccess(${getData()}, '${value}').length > 0)) ? '' : spread([1].map(function() { var data$${level + 1} = merge({}, data${0 >= level ? '' : '$' + level}); return [].concat(`;\n\t\t\t\tusesMerge = true;\n\t\t\t\tusesSpread = true;\n\t\t\t\tlevel += 1;\n\t\t\t} else if (key[0] === '%') {\n\t\t\t\t// handle style rendering \"{{%myvar}}\" - only to be used for attribute values!\n\t\t\t\tresult += key.substr(1).split(/\\s*,\\s*/).map(value => `renderStyle(safeAccess(${getData()}, '${value}'), ${getData()})`).join(' + ');\n\t\t\t\tusesRenderStyle = true;\n\t\t\t} else if (key[0] === '+') {\n\t\t\t\t// handle deep data transfer \"{{+myvar}}\"\n\t\t\t\tresult += `safeAccess(${getData()}, '${value}')${cat}`;\n\t\t\t} else if (key[0] !== '{' && key[0] !== '!') {\n\t\t\t\t// handle non-escaping prints \"{{{myvar}}}\"\n\t\t\t\tvalue = key;\n\t\t\t\tresult += `''+safeAccess(${getData()}, '${value}', true)${cat}`\n\t\t\t} else if (key[0] !== '!') {\n\t\t\t\t// regular prints \"{{myvar}}\"\n\t\t\t\tresult += `''+safeAccess(${getData()}, '${value}')${cat}`;\n\t\t\t} // ignore comments\n\t\t}\n\t\tif (text.substr(lastIndex).length > 0) {\n\t\t\tresult += \"'\" + text.substr(lastIndex).replace(/\\n/g, '').replace(/'/g, '\\\\\\'') + \"'\" + cat;\n\t\t}\n\t\treturn result;\n\t}\n\n\t// generate attribute objects for vdom creation\n\tfunction makeAttributes(attrs) {\n\t\tlet attributes = '{';\n\t\tlet attr;\n\n\t\twhile ((attr = attrRegExp.exec(attrs))) {\n\t\t\tif (attributes !== '{') attributes += ', ';\n\t\t\tattributes += '\"' + attr[1].toLowerCase() + '\": ' + handleText(attr[2] || attr[3] || '', true).replace(/\\s*[,+]\\s*$/g, '');\n\t\t}\n\t\treturn attributes + '}';\n\t}\n\n \t// clean up code\n\ton('--zino-addscript', content => {\n\t\tcontent = content.trim().replace(/;$/,'').replace(/(['\"`])([^\\1\\n]*)\\1/gm, (g,m,c) => g.replace(c, c.replace(/\\/\\//g, '\\\\/\\\\/'))).replace(/\\/\\/.*$/gm, '');\n\t\tif (content.trim()) {\n\t\t\tresultObject.functions.push(content);\n\t\t\tusesMerge = true;\n\t\t}\n\t});\n\t// handle all scripts and styles\n\tdata = data.replace(commentRegExp, '').replace(/<(script|style)(\\s+[^>]*?)?>((?:.|\\n)*?)<\\/\\1>/gi, (g, x, a, m) => {\n\t\tif (x === 'style') {\n\t\t\tresultObject.styles.push(m);\n\t\t} else {\n\t\t\tif (a && a.match(/\\s+src=(?:(?:'([^']+)')|(?:\"([^\"]+)\"))/g)) {\n\t\t\t\ttrigger('publish-script', RegExp.$1 || RegExp.$2);\n\t\t\t} else {\n\t\t\t\ttrigger('--zino-addscript', m);\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}).trim();\n\toff('--zino-addscript');\n\n\t// check if we have an actual HTML component code (looking for the starting tag)\n\tif (!data.match(tagRegExp)) {\n\t\tthrow new Error('No proper component provided');\n\t}\n\t// find out how the component is called\n\tresultObject.tagName = data.match(/^<([\\w_-]+)>/)[1].toLowerCase();\n\tresultObject.styles = handleStyles(resultObject.tagName, resultObject.styles);\n\n\t// loop through all HTML tags in code\n\twhile (match = tagRegExp.exec(data)) {\n\t\t// skip the ones we already processed\n\t\tif (match.index < lastIndex) continue;\n\t\tlet text = data.substring(lastIndex, match.index).replace(/^[ \\t]+|[ \\t]$/g, ' ').trim();\n\t\tlastIndex = match.index + match[0].length;\n\t\t// if we have some leading text (before the first tag)\n\t\tif (text.length > 0) {\n\t\t\t// it must be a text node\n\t\t\tresultObject.render += handleText(text);\n\t\t}\n\t\t// if we found the tag's definition, skip it\n\t\tif (match[2] === resultObject.tagName) continue;\n\t\tif (match[1]) {\n\t\t\t// closing tag\n\t\t\tlet expected = tagStack.pop();\n\t\t\tif (expected !== match[2]) {\n\t\t\t\tthrow new Error('Unexpected end of tag: ' + match[2] + '; expected to end ' + expected);\n\t\t\t}\n\t\t\tresultObject.render = resultObject.render.replace(/,\\s*$/g, '') + ')), ';\n\t\t} else {\n\t\t\t// opening tag\n\t\t\ttagStack.push(match[2]);\n\t\t\tlet attributes = makeAttributes(match[3]);\n\t\t\tresultObject.render += `Tag('${match[2]}', ${attributes}`;\n\t\t\tif (!match[4]) {\n\t\t\t\t// not a self-closing tag, so prepare for it's content\n\t\t\t\tresultObject.render += ', [].concat(';\n\t\t\t} else {\n\t\t\t\t// self-closing tag, close it immediately\n\t\t\t\tresultObject.render += '), ';\n\t\t\t\ttagStack.pop();\n\t\t\t}\n\t\t}\n\t}\n\tif (tagStack.length > 0) {\n\t\tthrow new Error('Unclosed tags: ' + tagStack.join(', '));\n\t}\n\tif (level > 0) {\n\t\tthrow new Error('Unexpected end of block');\n\t}\n\t// if we have content after the last found tag node\n\tif (data.substr(lastIndex).trim().length > 0) {\n\t\t// it must be a text node\n\t\tresultObject.render += handleText(data.substr(lastIndex).replace(/^[ \\t]+|[ \\t]$/g, ' ').trim());\n\t}\n\tresultObject.render = resultObject.render.replace(/,\\s*$/g, '');\n\n\t// add helper functions that were used by the code\n\tif (usesMerge) {\n\t\tresultObject.helperFunctions.push(merge);\n\t\tresultObject.helperFunctions.push(toArray);\n\t}\n\tif (usesSpread) {\n\t\tresultObject.helperFunctions.push(spread);\n\t}\n\tif (usesRenderStyle) {\n\t\tresultObject.helperFunctions.push(renderStyle);\n\t}\n\tif (resultObject.functions.length > 0) {\n\t\tresultObject.functions = 'merge({}, ' + (resultObject.functions.join(', ') || '{}') + ')';\n\t\tif (!usesMerge) {\n\t\t\tresultObject.helperFunctions.push(merge);\n\t\t}\n\t} else {\n\t\tresultObject.functions = '{}';\n\t}\n\tresultObject.styles = resultObject.styles.length > 0 ? 'styles: ' + JSON.stringify(resultObject.styles) + ',' : '';\n\tresultObject.helperFunctions = resultObject.helperFunctions.join('\\n');\n\n\t// fill in place-holders in base code and return the result\n\treturn baseCode.replace(/\\{\\{([^\\}]+)\\}\\}/g, (g, m) => resultObject[m]);\n}\n","import {isFn, isObj, toArray} from './utils';\n\nfunction attachEvent (el, events, host) {\n\tif (!isFn(el.addEventListener)) return;\n\tlet findEl = (selector, target) => {\n\t\tlet node = toArray(el.querySelectorAll(selector));\n\t\twhile (node.length > 0 && target !== host) {\n\t\t\tif (node.indexOf(target) >= 0) return node[node.indexOf(target)];\n\t\t\ttarget = target.parentNode;\n\t\t}\n\t\treturn false;\n\t};\n\tevents.forEach(eventObj => {\n\t\tObject.keys(eventObj.handlers).forEach(event => {\n\t\t\tel.addEventListener(event, e => {\n\t\t\t\tlet target;\n\t\t\t\tif (eventObj.selector === ':host' || (target = findEl(eventObj.selector, e.target))) {\n\t\t\t\t\ttarget && (target.getHost = () => host.getHost());\n\t\t\t\t\teventObj.handlers[event].call(target || host, e);\n\t\t\t\t}\n\t\t\t}, false);\n\t\t});\n\t});\n}\n\nexport function attachSubEvents(events) {\n\tlet {subEvents, tag} = events;\n\tlet count = {};\n\t// make sure that we only attach events if we are actually in browser context\n\tif (tag.addEventListener.toString().indexOf('[native code]') >= 0) {\n\t\tsubEvents.events.forEach(event => {\n\t\t\tlet el = event.tag;\n\t\t\tif (!isObj(el)) {\n\t\t\t\t// we have a selector rather than an element\n\t\t\t\tcount[el] = (count[el] || 0) + 1;\n\t\t\t\t// turn the selector into the corresponding element\n\t\t\t\tel = tag.querySelectorAll(el)[count[el] - 1];\n\t\t\t}\n\t\t\t// if no events have been attached yet\n\t\t\tif (el && el.children.length > 0 && !el.children[0].__eventsAttached) {\n\t\t\t\t// attach children tag events to the shadow root\n\t\t\t\tattachEvent(el.children[0], event.childEvents, el);\n\t\t\t\t// attach host events directly to the component!\n\t\t\t\tattachEvent(el, event.hostEvents, el);\n\t\t\t\tel.children[0].__eventsAttached = true;\n\t\t\t}\n\t\t});\n\t}\n}","import {uuid, toArray} from './utils';\nimport {trigger} from './events';\n\nlet tagFilter = [];\nlet tagsCreated = [];\nlet dataResolver = (attr, value) => {\n\treturn attr;\n};\n\nfunction isArray(obj) {\n\treturn Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nexport function hashCode(str) {\n\tlet hash = 0, i, chr;\n\tfor (i = 0; i < str.length; i++) {\n\t\tchr   = str.charCodeAt(i);\n\t\thash  = ((hash << 5) - hash) + chr;\n\t\thash |= 0;\n\t}\n\treturn hash;\n}\n\nexport function setDataResolver(resolver) {\n\tdataResolver = resolver;\n}\n\nexport function Tag(tagName, attributes, ...children) {\n\ttagName = tagName.toLowerCase();\n\tattributes = attributes || {};\n\tlet attributeHash = '';\n\tObject.keys(attributes).forEach(attr => {\n\t\tattributes[attr] = {name: attr, value: typeof attributes[attr] !== 'object' ? attributes[attr] : ('--' + dataResolver(attr, attributes[attr]) + '--')};\n\t\tattributeHash += attr + attributes[attr].value;\n\t});\n\tchildren = children.length === 1 && Array.isArray(children[0]) ? children[0] : children;\n\tlet tag = {\n\t\ttagName,\n\t\tattributes,\n\t\tchildren: children.filter(child => child),\n\t\t__hash: hashCode(tagName + '!' + attributeHash + '@' + children.map(child => (child && child.__hash || child)).join('!'))\n\t};\n\tif (tagFilter.indexOf(tagName) >= 0) tagsCreated.push(tag);\n\treturn tag;\n}\n\n/**\n * defines which VDOM nodes should be captured for getTagsCreated()\n * @param {Array} filter - an array of strings representing the tag names of the tags to be captured\n */\nexport function setFilter(filter) {\n\ttagFilter = filter;\n}\n\n/**\n * retrieves the list of tags that have been created since the last call of getTagsCreated()\n * @return {Array} - an array of VDOM nodes that were created\n */\nexport function clearTagsCreated() {\n\ttagsCreated = [];\n}\n\n/**\n * retrieves the list of tags that have been created since the last call of getTagsCreated()\n * @return {Array} - an array of VDOM nodes that were created\n */\nexport function getTagsCreated() {\n\tlet created = tagsCreated;\n\treturn created;\n}\n\n/**\n * Calculates the HTML structure as a String represented by the VDOM\n *\n * @param  {Object} node - the VDOM node whose inner HTML to generate\n * @return {String} - the HTML structure representing the VDOM\n */\nexport function getInnerHTML(node) {\n\tif (!node.children) return '';\n\tif (!isArray(node.children) && (typeof HTMLCollection !== 'undefined' && !(node.children instanceof HTMLCollection))) node.children = [node.children];\n\n\treturn (isArray(node) && node || (typeof HTMLCollection !== 'undefined' && node.children instanceof HTMLCollection ? [].slice.call(node.children) : node.children)).map(child => {\n\t\tif (typeof child !== 'object') {\n\t\t\treturn '' + child;\n\t\t} else if (isArray(child)) {\n\t\t\treturn getInnerHTML(child);\n\t\t} else {\n\t\t\tlet attributes = [''].concat(Object.keys(child.attributes).map(attr => attr+'=\"' + child.attributes[attr].value + '\"'));\n\t\t\tif (['img', 'link', 'meta', 'input', 'br', 'area', 'base', 'param', 'source', 'hr', 'embed'].indexOf(child.tagName) < 0) {\n\t\t\t\treturn `<${child.tagName}${attributes.join(' ')}>${getInnerHTML(child)}</${child.tagName}>`;\n\t\t\t} else {\n\t\t\t\treturn `<${child.tagName}${attributes.join(' ')}/>`;\n\t\t\t}\n\t\t}\n\t}).join('');\n}\n\n/**\n * Creates a new DOM node\n *\n * @param  {Object|String} node - a VDOM node\n * @param  {Document} document - the document in which to create the DOM node\n * @return {Node} - the DOM node created (either a text element or an HTML element)\n */\nfunction createElement(node, document) {\n\tlet tag;\n\tif (typeof node !== 'object') {\n\t\t// we have a text node, so create one\n\t\ttag = document.createTextNode('' + node);\n\t} else {\n\t\ttag = document.createElement(node.tagName);\n\t\t// add all required attributes\n\t\tObject.keys(node.attributes).forEach((attr) => {\n\t\t\ttag.setAttribute(attr, node.attributes[attr].value);\n\t\t});\n\t\t// define it's inner structure\n\t\ttag.innerHTML = getInnerHTML(node);\n\t\ttag.__hash = node.__hash;\n\t}\n\n\treturn tag;\n}\n\nfunction applyText(domChild, dom, node, document) {\n\t// simply apply the value\n\tif ((node || '').match(/<[\\w:_-]+[^>]*>/)) {\n\t\tif (dom.childNodes.length === 1) {\n\t\t\tdom.innerHTML = node;\n\t\t} else {\n\t\t\tlet html = document.createElement('span');\n\t\t\thtml.innerHTML = node;\n\t\t\tdom.replaceChild(html, domChild);\n\t\t}\n\t} else {\n\t\t// it's just a text node, so simply replace the element with the text node\n\t\tdom.replaceChild(createElement((node || '').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&'), document), domChild);\n\t}\n}\n\n/**\n * Applies a VDOM to an actual DOM, meaning that the state of the VDOM will be recreated on the DOM.\n * The end result is, that the DOM structure is the same as the VDOM structure. Existing elements will\n * be repurposed, new elements created where necessary.\n *\n * @param  {DOM} dom - the DOM to which the VDOM should be applied\n * @param  {Object} vdom - the VDOM to apply to the DOM\n * @param  {Document} document - the document that the DOM is based on, used for createElement() and createTextNode() calls\n */\nexport function applyDOM(dom, vdom, document) {\n\tif (!dom || !vdom) return;\n\tif (!isArray(vdom)) {\n\t\t// if we have a node\n\t\tif (!isArray(vdom.children)) vdom.children = [vdom.children];\n\t\tif (dom.__hash !== vdom.__hash) {\n\t\t\t// if the tag name is not the same\n\t\t\tif (vdom.tagName !== dom.tagName.toLowerCase()) {\n\t\t\t\t// replace the node entirely\n\t\t\t\tdom.parentNode.replaceChild(createElement(vdom, document), dom);\n\t\t\t} else {\n\t\t\t\tlet attributes = Object.keys(vdom.attributes);\n\t\t\t\t// check all vdom attributes\n\t\t\t\tfor (let attr, index = 0, len = attributes.length; attr = vdom.attributes[attributes[index]], index < len; index += 1) {\n\t\t\t\t\t// if the VDOM attribute is a non-object\n\t\t\t\t\tif (typeof attr.value !== 'object') {\n\t\t\t\t\t\t// check if it differs\n\t\t\t\t\t\tif (dom.getAttribute(attr.name) != attr.value) {\n\t\t\t\t\t\t\t// if so, apply it\n\t\t\t\t\t\t\tdom.setAttribute(attr.name, attr.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// the attribute is an object\n\t\t\t\t\t\tif (dom.getAttribute(attr.name) && dom.getAttribute(attr.name).match(/^--|--$/g)) {\n\t\t\t\t\t\t\t// if it has a complex value, use the data resolver to define it on the DOM\n\t\t\t\t\t\t\tlet id = dataResolver(attr.name, attr.value, dom.getAttribute(attr.name).replace(/^--|--$/g, ''));\n\t\t\t\t\t\t\t// only set the ID with markers so that we know it is supposed to be a complex value\n\t\t\t\t\t\t\tdom.setAttribute(attr.name, `--${id}--`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if we have too many attributes in our DOM\n\t\t\t\tlet index = 0;\n\t\t\t\twhile (dom.attributes.length > attributes.length) {\n\t\t\t\t\tlet attr = dom.attributes[index];\n\t\t\t\t\t// if the respective attribute does not exist on the VDOM\n\t\t\t\t\tif (typeof attributes[attr.name] === 'undefined') {\n\t\t\t\t\t\t// remove it\n\t\t\t\t\t\tdom.removeAttribute(attr.name);\n\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tindex += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// deal with the vdom's children\n\tlet children = (isArray(vdom) ? vdom : vdom.__hash !== dom.__hash ? vdom.children : []);\n\tfor (let index = 0, node, len = children.length; node = children[index], index < len; index += 1) {\n\t\tif (isArray(node)) return applyDOM(dom, node, document);\n\t\tlet domChild = dom.childNodes[index];\n\t\tif (typeof domChild === 'undefined') {\n\t\t\t// does not exist, so it needs to be appended\n\t\t\tdom.appendChild(createElement(node, document));\n\t\t} else if (domChild.nodeType === 3) {\n\t\t\t// is a text node\n\t\t\t// if the VDOM node is also a text node\n\t\t\tif (typeof node === 'string' && domChild.nodeValue !== node) {\n\t\t\t\tapplyText(domChild, dom, node, document);\n\t\t\t} else if (typeof node !== 'string') {\n\t\t\t\t// else replace with a new element\n\t\t\t\tdom.replaceChild(createElement(node, document), domChild);\n\t\t\t}\n\t\t} else if (domChild.nodeType === 1) {\n\t\t\t// is a normal HTML tag\n\t\t\tif (typeof node === 'object') {\n\t\t\t\t// the VDOM is also a tag, apply it recursively\n\t\t\t\tapplyDOM(domChild, node, document);\n\t\t\t} else {\n\t\t\t\tapplyText(domChild, dom, node, document);\n\t\t\t}\n\t\t}\n\t}\n\tif (dom.__hash !== vdom.__hash && dom.childNodes.length > children.length) {\n\t\t// remove superfluous child nodes\n\t\tfor (let index = children.length, len = dom.childNodes.length; index < len; index += 1) {\n\t\t\tdom.removeChild(dom.childNodes[index]);\n\t\t\tlen -= 1;\n\t\t\tindex -= 1;\n\t\t}\n\t}\n\tdom.__hash = vdom.__hash;\n}\n","import * as vdom from './vdom';\nimport {emptyFunc, isFn, isObj, uuid, merge, toArray} from './utils';\nimport {trigger, on} from './events';\n\nlet resolveData = (key, value, oldID) => {\n\tlet id = uuid();\n\tif (oldID) {\n\t\t// unregister old entry\n\t\tdelete dataRegistry[oldID];\n\t}\n\tdataRegistry[id] = value;\n\treturn id;\n};\n\nlet resolveDataKey = (key) => dataRegistry[key];\n\nlet tagRegistry = {},\n\tdataRegistry = {},\n\tdefaultFunctions = {\n\t\t'props': {},\n\t\t'mount': emptyFunc,\n\t\t'unmount': emptyFunc,\n\t\t'render': emptyFunc,\n\n\t\tgetHost() { return this; },\n\t\tsetProps: function setProps(name, value) {\n\t\t\tlet tag = this.getHost();\n\t\t\tif (isObj(name)) {\n\t\t\t\ttag.mounting = true;\n\t\t\t\tfor (let all in name) {\n\t\t\t\t\tsetProps.call(this, all, name[all]);\n\t\t\t\t}\n\t\t\t\ttag.mounting = false;\n\t\t\t} else {\n\t\t\t\ttag.props[name] = value;\n\t\t\t\tlet attrName = 'data-' + name.replace(/[A-Z]/g, g => `-${g.toLowerCase()}`);\n\t\t\t\tif (tag.attributes[attrName]) {\n\t\t\t\t\tdefineAttribute(tag, attrName, `--${resolveData(name, value, tag.attributes[attrName].value)}--`);\n\t\t\t\t}\n\t\t\t}\n\t\t\t!tag.mounting && trigger('--zino-rerender-tag', tag);\n\t\t}\n\t};\n\nexport function getDataRegistry() { return dataRegistry; }\nexport function setDataRegistry(newValues) { dataRegistry = newValues; }\nexport function setResolveData(fn, fn2) { resolveData = fn; resolveDataKey = fn2; }\nexport function registerTag(fn, document, Zino) {\n\tlet firstElement = new fn(vdom.Tag, Zino),\n\t\ttagName = (firstElement && firstElement.tagName) || (fn.name||'');\n\tif (!tagName) {\n\t\ttagName = fn.toString().split('\\n')[0].replace(/^\\s*function\\s+(.*?)\\s*\\(.*$/, '$1');\n\t\tif (!tagName.match(/^[A-Z][A-Za-z]*$/)) {\n\t\t\tthrow new Error('Unable to extract component\\'s tag name from provided component function: ' + fn.toString());\n\t\t}\n\t}\n\ttagName = tagName.replace(/([A-Z])/g, (g, beginning) => '-' + beginning).toLowerCase().replace(/^-/, '')\n\n\tif (firstElement instanceof fn) {\n\t\tfirstElement.__zino = Zino;\n\t\tfirstElement.functions = {\n\t\t\tprops: firstElement.props || {},\n\t\t\tevents: firstElement.events || {},\n\t\t\trender: firstElement.onrender || emptyFunc,\n\t\t\tmount: firstElement.onmount || emptyFunc,\n\t\t\tunmount: firstElement.onunmount || emptyFunc\n\t\t};\n\t}\n\n\tif (tagRegistry[tagName]) {\n\t\t// tag is already registered\n\t\t// initialize all occurences in provided context\n\t\tdocument && toArray(document.getElementsByTagName(tagName)).forEach(tag => initializeTag(tag, tagRegistry[tagName]));\n\t\treturn;\n\t}\n\n\ttrigger('publish-style', {styles: firstElement.styles, tagName});\n\tfirstElement.functions = merge({}, defaultFunctions, firstElement.functions);\n\ttagRegistry[tagName] = firstElement;\n\n\t// initialize all occurences in provided context\n\tdocument && toArray(document.getElementsByTagName(tagName)).forEach(tag => initializeTag(tag, tagRegistry[tagName]));\n}\n\nexport function mount(tag, ignoreRender) {\n\tif (!tag || !tag.tagName) return {};\n\tlet entry = tagRegistry[tag.tagName.toLowerCase()];\n\tif (!entry || tag.getAttribute('__ready')) return {};\n\tif (ignoreRender) entry.functions.render = emptyFunc;\n\treturn initializeTag.call(ignoreRender ? {noEvents: true} : this, tag, entry);\n}\n\nexport function render(tag) {\n\tif (!tag || !tag.addEventListener) return;\n\tlet subEvents = renderTag(tag);\n\tif (!subEvents) return;\n\ttrigger('--zino-attach-events', {\n\t\tsubEvents,\n\t\ttag\n\t});\n}\n\nexport function flushRegisteredTags() {\n\ttagRegistry = {};\n}\n\nfunction initializeTag(tag, registryEntry) {\n\t// check if the tag has been initialized already\n\tif (tag.__vdom || !registryEntry) return;\n\tlet functions = registryEntry.functions;\n\n\t// if it has been pre-rendered\n\tif (tag.children.length > 0 && tag.children[0].attributes && tag.children[0].attributes['class'] && tag.children[0].attributes['class'].value === '-shadow-root') {\n\t\tlet sibling = tag.children[1];\n\t\t// remove original HTML content\n\t\tif (sibling && sibling.className === '-original-root') {\n\t\t\ttag.__i = sibling.innerHTML;\n\t\t\tsetElementAttr(sibling, tag);\n\t\t\tsibling.parentNode.removeChild(sibling);\n\t\t}\n\t\ttag.isRendered = true;\n\t} else {\n\t\ttag.__i = tag.ownerDocument ? tag.innerHTML : vdom.getInnerHTML(tag);\n\t\tsetElementAttr(tag);\n\t\ttag.innerHTML = '<div class=\"-shadow-root\"></div>';\n\t\ttag.isRendered = false;\n\t}\n\tif (!tag.nodeType) while (tag.children.length > 1) {\n\t\ttag.children.pop();\n\t}\n\ttrigger('--zino-initialize-node', {tag, node: functions, entry: registryEntry});\n\ttag.__vdom = {};\n\ttag.createNode = vdom.Tag;\n\n\t// render the tag's content\n\tlet subEvents = !tag.isRendered && renderTag.call(this, tag) || {events:[]};\n\n\t// attach events\n\tlet hostEvents = [],\n\t\tevents = functions.events || [],\n\t\tchildEvents = Object.keys(events).filter(all => {\n\t\t\tlet isNotSelf = all !== ':host' && all !== tag.tagName;\n\t\t\tif (!isNotSelf) hostEvents.push({handlers: events[all], selector: all});\n\t\t\treturn isNotSelf;\n\t\t}).map(e => ({selector: e, handlers: events[e]}));\n\n\tsubEvents.events = subEvents.events.concat({childEvents, hostEvents, tag: this && this.noEvents ? tag.tagName : tag})\n\n\tif (!tag.attributes.__ready) {\n\t\tdefineAttribute(tag, '__ready', true);\n\t}\n\n\tif (!this || this.noEvents !== true) {\n\t\t// attach sub events\n\t\ttrigger('--zino-attach-events', {subEvents, tag});\n\n\t\t[tag].concat(tag.__subs).forEach(function(el) {\n\t\t\tlet actual = el && el.getHost() || {};\n\t\t\tisFn(actual.onready) && actual.onready.call(actual);\n\t\t});\n\t} else {\n\t\treturn subEvents;\n\t}\n}\n\nfunction defineAttribute(tag, name, value) {\n\tif (tag.ownerDocument) {\n\t\t// use the HTMLElement's setAttribute to define the attribute\n\t\t(tag.prototype || HTMLElement.prototype).setAttribute.call(tag, name, value);\n\t} else {\n\t\t// we now know it can only be a vdom node, so set attribute vdom-style\n\t\ttag.attributes[name] = {name, value};\n\t}\n}\n\nfunction initializeNode({tag, node: functions = defaultFunctions, entry}) {\n\t// copy all defined functions/attributes\n\tfor (let all in functions) {\n\t\tlet entry = functions[all];\n\t\tif (['mount', 'unmount', 'events', 'render'].indexOf(all) < 0) {\n\t\t\tif (isFn(entry)) {\n\t\t\t\ttag[all] = entry.bind(tag);\n\t\t\t} else {\n\t\t\t\ttag[all] = isObj(tag[all]) ? merge({}, entry, tag[all]) : entry;\n\t\t\t}\n\t\t}\n\t}\n\t// define basic properties\n\tlet desc = Object.getOwnPropertyDescriptor(tag, 'body');\n\tif (!desc || typeof desc.get === 'undefined') {\n\t\tObject.defineProperty(tag, 'body', {\n\t\t\tset(val) {\n\t\t\t\ttag.__i = val;\n\t\t\t\tsetElementAttr(tag);\n\t\t\t\ttrigger('--zino-rerender-tag', tag.getHost());\n\t\t\t},\n\t\t\tget() { return tag.__i; }\n\t\t});\n\t}\n\ttag.setAttribute = function(attr, val) {\n\t\tdefineAttribute(this, attr, val);\n\t\ttrigger('--zino-rerender-tag', this);\n\t};\n\n\t// call mount callback\n\ttag.props = merge({}, functions.props, getAttributes(tag, true));\n\ttag.attrs = getAttributes(tag);\n\n\ttry {\n\t\ttag.mounting = true;\n\t\tfunctions.mount.call(tag, entry.__zino);\n\t\tdelete tag.mounting;\n\t} catch (e) {\n\t\te.message = 'Unable to call mount function for ' + tag.tagName + ': ' + (e.message || e);\n\t\tthrow e;\n\t}\n}\n\nfunction renderTag(tag, registryEntry = tagRegistry[tag.tagName.toLowerCase()]) {\n\tlet events = [],\n\t\trenderCallbacks = [],\n\t\trenderedSubElements = [],\n\t\trenderedDOM;\n\n\t// do the actual rendering of the component\n\tvdom.setDataResolver(resolveData);\n\tvdom.clearTagsCreated();\n\tlet data = getAttributes(tag);\n\tlet dataList = [];\n\n\tfunction dataToString(data, depth = 0) {\n\t\tlet num = 0;\n\t\tfor (let all in data) {\n\t\t\tif (typeof data[all] !== 'object') {\n\t\t\t\tnum = vdom.hashCode(num + ';' + all + ':' + (data[all] === null || data[all] === undefined ? 'null' : data[all]).toString());\n\t\t\t} else {\n\t\t\t\tlet res = all + ':';\n\t\t\t\tif (depth < 10 && !(depth === 0 && all === 'element') && dataList.indexOf(data[all]) < 0) {\n\t\t\t\t\tdataList.push(data[all]);\n\t\t\t\t\tres += dataToString(data[all], depth + 1);\n\t\t\t\t}\n\t\t\t\tnum = vdom.hashCode(num + ';' + res);\n\t\t\t}\n\t\t}\n\t\treturn num;\n\t}\n\tdataList = [];\n\tlet hash = dataToString(data);\n\n\tif (tag.__dataHash === hash) {\n\t\t// data did not change, so no re-render required\n\t\treturn {events, renderCallbacks, data, subElements: renderedSubElements};\n\t}\n\ttag.__dataHash = hash;\n\n\tif (isFn(registryEntry.render)) {\n\t\t// tell the vdom which tags to remember to look for\n\t\tvdom.setFilter(Object.keys(tagRegistry));\n\t\trenderedDOM = vdom.Tag('div', {'class': '-shadow-root'}, registryEntry.render.call(tag, data));\n\t} else {\n\t\tthrow new Error('No render function provided in component ' + tag.tagName);\n\t}\n\n\t// unmount previously rendered sub components\n\ttag.__subs && tag.__subs.forEach(unmount);\n\n\t// render all contained sub components\n\t// retrieve the tags that the vdom was made aware of (all our registered components)\n\trenderedSubElements = vdom.getTagsCreated();\n\tfor (let idx = 0, len = renderedSubElements.length; idx < len; idx += 1) {\n\t\tlet subEl = renderedSubElements[idx];\n\n\t\t// initialize them all\n\t\tlet subElEvents = initializeTag.call({\n\t\t\tnoRenderCallback: true,\n\t\t\tnoEvents: true\n\t\t}, subEl, tagRegistry[subEl.tagName]);\n\t\tif (subElEvents) {\n\t\t\t// make sure that we build the hierarchical order of sub elements (same as what comes back from querySelectorAll)\n\t\t\trenderedSubElements.splice.apply(renderedSubElements, [idx + 1, 0].concat(subElEvents.subElements));\n\t\t\t// array has been extended, adapt...\n\t\t\tidx += subElEvents.subElements.length;\n\t\t\tlen += subElEvents.subElements.length;\n\t\t\tevents = events.concat(subElEvents.events);\n\t\t\trenderCallbacks = renderCallbacks.concat(subElEvents.renderCallbacks);\n\t\t}\n\t}\n\n\tif (tag.ownerDocument) {\n\t\t// has been rendered before, so just apply diff\n\t\tvdom.applyDOM(tag.children[0], renderedDOM, tag.ownerDocument);\n\t} else {\n\t\ttag.children[0] = renderedDOM;\n\t\ttag.children[0].__hash = renderedDOM.__hash;\n\t}\n\ttag.__subs = renderedSubElements;\n\ttag.__vdom = renderedDOM;\n\n\tlet inconsistent = false;\n\n\tdo {\n\t\tif (inconsistent) {\n\t\t\ttag.children[0].innerHTML = vdom.getInnerHTML(renderedDOM);\n\t\t\tinconsistent = false;\n\t\t\tbreak;\n\t\t}\n\t\t// if we have rendered any sub components, retrieve their actual DOM node\n\t\tif (renderedSubElements.length > 0 && tag.querySelectorAll) {\n\t\t\tfor (let subEl, ready = tag.querySelectorAll('[__ready]'), index = 0, len = ready.length; subEl = ready[index], index < len; index += 1) {\n\t\t\t\t// apply all additional functionality to them (custom functions, attributes, etc...)\n\t\t\t\tmerge(subEl, renderedSubElements[index]);\n\t\t\t\t// update getHost to return the DOM node instead of the vdom node\n\t\t\t\tif (!renderedSubElements[index] || subEl.tagName.toLowerCase() !== renderedSubElements[index].tagName) {\n\t\t\t\t\tconsole.info('Inconsistent state - might be caused by additional components generated in render callback: ', subEl, tag.__subs, ready);\n\t\t\t\t\tinconsistent = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tsubEl.getHost = renderedSubElements[index].getHost = defaultFunctions.getHost.bind(subEl);\n\t\t\t}\n\t\t}\n\t} while (inconsistent);\n\ttag.isRendered = true;\n\n\t// if this is not a sub component's rendering run\n\tif (!this || !this.noRenderCallback) {\n\t\t// call all of our sub component's render functions\n\t\trenderCallbacks.forEach(callback => {\n\t\t\ttry {\n\t\t\t\tcallback.fn.call(callback.tag.getHost(), tagRegistry[callback.tag.getHost().tagName.toLowerCase()].__zino);\n\t\t\t} catch (e) {\n\t\t\t\tthrow new Error('Unable to call render callback for component ' + callback.tag.tagName + ': ' + (e.message || e));\n\t\t\t}\n\t\t});\n\t\t// call our own rendering function\n\t\ttry {\n\t\t\tregistryEntry.functions.render.call(tag, registryEntry.__zino);\n\t\t} catch (e) {\n\t\t\tthrow new Error('Unable to call render callback for component ' + tag.tagName + ': ' + (e.message || e));\n\t\t}\n\t} else {\n\t\t// just add this sub component's rendering function to the list\n\t\trenderCallbacks.push({fn: registryEntry.functions.render, tag});\n\t}\n\n\treturn {events, renderCallbacks, data, subElements: renderedSubElements};\n}\n\nexport function unmount(tag) {\n\tlet name = (tag && tag.tagName || '').toLowerCase(),\n\t\tentry = tagRegistry[name];\n\tif (tag && name && entry) {\n\t\t[].forEach.call(tag.nodeType === 1 && tag.attributes || Object.keys(tag.attributes).map(attr => tag.attributes[attr]), attr => {\n\t\t\t// cleanup saved data\n\t\t\tif (attr.name.indexOf('data-') >= 0) {\n\t\t\t\tdelete dataRegistry[attr.value];\n\t\t\t}\n\t\t});\n\t\ttry {\n\t\t\tentry.__subs && entry.__subs.forEach(unmount);\n\t\t\tentry.functions.unmount.call(tag, entry.__zino);\n\t\t} catch (e) {\n\t\t\tthrow new Error('Unable to unmount tag ' + name + ': ' + (e.message || e));\n\t\t}\n\t}\n}\n\nfunction getAttributes(tag, propsOnly) {\n\tlet attrs = {props: tag.props, element: tag.element, styles: tag.styles, body: tag.__i},\n\t\tprops = attrs.props;\n\n\t[].forEach.call(tag.nodeType === 1 && tag.attributes || Object.keys(tag.attributes).map(attr => tag.attributes[attr]), attribute => {\n\t\tlet isComplex = attribute.name.indexOf('data-') >= 0 && typeof attribute.value === 'string' && attribute.value.substr(0, 2) === '--';\n\t\tlet value = attribute.value;\n\t\tattrs[attribute.name] || (attrs[attribute.name] = isComplex && typeof value === 'string' && resolveDataKey(value.replace(/^--|--$/g, '')) || value);\n\t\tif (attribute.name.indexOf('data-') === 0) {\n\t\t\tif (typeof attrs[attribute.name] === 'string' && attrs[attribute.name].match(/^--[a-f0-9-]+--$/)) {\n\t\t\t\tattrs[attribute.name] = resolveDataKey(value.replace(/^--|--$/g, ''));\n\t\t\t}\n\t\t\tprops[attribute.name.replace(/^data-/g, '').replace(/(\\w)-(\\w)/g, (g, m1, m2) => m1 + m2.toUpperCase())] = attrs[attribute.name];\n\t\t}\n\t});\n\n\tif (propsOnly) return props;\n\treturn attrs;\n}\n\nfunction setElementAttr(source, target = source) {\n\tlet baseAttrs = {};\n\t[].forEach.call(source.children, el => {\n\t\tif (!el.tagName) return;\n\t\tlet name = el.tagName.toLowerCase();\n\t\tif (baseAttrs[name]) {\n\t\t\tif (!baseAttrs[name].isArray) {\n\t\t\t\tbaseAttrs[name] = [baseAttrs[name]];\n\t\t\t\tbaseAttrs[name].isArray = true;\n\t\t\t}\n\t\t\tbaseAttrs[name].push(el);\n\t\t} else {\n\t\t\tbaseAttrs[name] = el;\n\t\t}\n\t});\n\ttarget.element = baseAttrs;\n}\n\non('--zino-initialize-node', initializeNode);\n","import {isObj, toArray, identity} from './utils';\nimport * as browser from './browser';\nimport {Zino, actions, setDocument, setComponentLoader} from './facade';\nimport {setDataRegistry} from './core';\n\nlet urlRegistry = window.zinoTagRegistry || {},\n\tdirtyTags = [],\n\tmountTags = [],\n\tparseCode = identity,\n\ttagObserver = new MutationObserver(records => {\n\t\trecords.forEach(record => {\n\t\t\tlet added = record.addedNodes,\n\t\t\t\tremoved = record.removedNodes;\n\n\t\t\tif (added.length > 0) {\n\t\t\t\tmountTags = [].concat.call(added, mountTags);\n\t\t\t} else if (removed.length > 0) {\n\t\t\t\t[].forEach.call(removed, tag => {\n\t\t\t\t\t(tag.children && toArray(tag.querySelectorAll('[__ready]')) || []).concat(tag).forEach(actions.unmount);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\nsetDataRegistry(window.zinoDataRegistry || {});\n\nwindow.Zino = Zino;\nZino.isBrowser = true;\nZino.isServer = false;\nZino.fetch = function(url, callback, cache, code) {\n\tif (cache && urlRegistry[url] && !urlRegistry[url].callback) {\n\t\treturn callback(urlRegistry[url], 200);\n\t} else if (isObj(urlRegistry[url])) {\n\t\treturn urlRegistry[url].callback.push(callback);\n\t}\n\turlRegistry[url] = code || {\n\t\tcallback: [callback]\n\t};\n\tif (code) return;\n\tlet req = new XMLHttpRequest();\n\treq.open('GET', url, true);\n\treq.onreadystatechange = () => {\n\t\tif (req.readyState === 4) {\n\t\t\tlet callbacks = urlRegistry[url].callback;\n\t\t\tif (req.status === 200) {\n\t\t\t\turlRegistry[url] = req.responseText;\n\t\t\t}\n\t\t\tif (!cache) delete urlRegistry[url];\n\t\t\tcallbacks.forEach(cb => cb(req.responseText, req.status));\n\t\t}\n\t};\n\treq.send();\n};\nsetComponentLoader((url, fn) => {\n\tZino.fetch(url, (data, status) => {\n\t\tlet path = url.replace(/[^\\/]+$/g, '');\n\t\tif (status === 200) {\n\t\t\tlet code;\n\t\t\ttry {\n\t\t\t\tdata = parseCode(data);\n\t\t\t\tcode = new Function('return ' + data.replace(/url\\((\\\\*['\"])?(.*?)\\1\\)/g, function(g, quote, url) {\n\t\t\t\t\t\tif (url.indexOf('data:') === 0 || url.indexOf('http') === 0 || url.indexOf('//') === 0 || url.indexOf('/') === 0) return g;\n\t\t\t\t\t\treturn 'url(' + path + url + ')';\n\t\t\t\t\t}).replace(/\\bZino.import\\s*\\(/g, 'Zino.import.call({path: ' + JSON.stringify(path) + '}, ').trim().replace(/;$/, ''))();\n\t\t\t\tif (typeof code(() => {}, Zino) === 'function') {\n\t\t\t\t\tcode = code();\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\te.message = 'Unable to import tag ' + url.replace(/.*\\//g, '') + ': ' + e.message;\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tfn(code);\n\t\t}\n\t}, true);\n});\nsetDocument(window.document);\n\nexport {Zino};\nexport function setParser(fn) { parseCode = fn; };\n\nZino.on('--zino-attach-events', browser.attachSubEvents);\nZino.on('--zino-rerender-tag', tag => dirtyTags.indexOf(tag) < 0 && dirtyTags.push(tag));\nZino.trigger('publish-style', '[__ready] { contain: content; }');\ntoArray(document.querySelectorAll('[rel=\"zino-tag\"]')).forEach(tag => Zino.import(tag.href));\ntagObserver.observe(document.body, {\n\tsubtree: true,\n\tchildList: true\n});\n\nfunction loopList(start, list, action) {\n\twhile (list.length > 0) {\n\t\tlet entry = list.shift();\n\t\tif (entry instanceof NodeList || entry.length > 0) {\n\t\t\tfor (var all in entry) {\n\t\t\t\taction(entry[all]);\n\t\t\t}\n\t\t} else {\n\t\t\taction(entry);\n\t\t}\n\t\tif (performance.now() - start > 16) { break; }\n\t}\n}\n\nrequestAnimationFrame(function reRender(start) {\n\tloopList(start, mountTags, actions.mount);\n\tloopList(start, dirtyTags, actions.render);\n\trequestAnimationFrame(reRender);\n});\n","import {registerTag, render, mount, unmount, flushRegisteredTags} from './core';\nimport {emptyFunc, identity, isObj, toArray, isFn} from './utils';\nimport {on, one, off, trigger} from './events';\n\nlet document,\n\tloadComponent = emptyFunc;\n\nexport let Zino = {\n\ton, one, off, trigger,\n\tfetch: emptyFunc,\n\n\timport: function(path, callback = emptyFunc) {\n\t\tlet runCode = code => {\n\t\t\tif (code) {\n\t\t\t\tisFn(code.setDocument) && code.setDocument(document);\n\t\t\t\tregisterTag(code, document.body, Zino);\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\t\tif (typeof path === 'function') {\n\t\t\trunCode(path);\n\t\t} else {\n\t\t\tloadComponent((this.path || '') + path, runCode);\n\t\t}\n\t}\n};\n\nexport let actions = {mount, render, unmount};\nexport function setDocument(doc) { document = doc; }\nexport function setComponentLoader(fn) { loadComponent = fn; }\nexport {flushRegisteredTags};\n\non('publish-style', data => {\n\tif (typeof data.tagName === 'string' && data.styles && data.styles.length > 0) {\n\t\tif (document.getElementById('style:' + data.tagName)) return;\n\t\tlet style = document.createElement('style');\n\t\tstyle.innerHTML = data.styles;\n\t\tstyle.setAttribute('id', 'style:' + data.tagName);\n\t\tdocument.head.appendChild(style);\n\t}\n});\n","import {parse} from './mustacheparser';\nimport {Zino, setParser} from './zino-light';\n\nexport default Zino;\nsetParser(data => {\n\t// if we have HTML input\n\tif (data.trim().indexOf('<') === 0) {\n\t\t// convert it to JS\n\t\tdata = parse(data);\n\t}\n\n\treturn data;\n});\n"]}